{"version":3,"file":"app.js","sourceRoot":"","sources":["app.ts"],"names":[],"mappings":"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","sourcesContent":["\nimport Parse from '../middleware/parse'\nimport thunk from 'redux-thunk';\nimport rp from 'request-promise';\nimport * as geocoder from 'geocoder';\nimport dateFormat from 'dateformat';\nimport DateTime from 'datetime-converter-nodejs';\nimport * as Map from 'es6-map';\nimport * as config from 'config';\nimport * as redux from 'redux';\nimport * as Promise from 'promise';\nimport * as objectAssign from 'object-assign';\nimport * as bot from '../middleware/bot';\nimport * as types from '../middleware/constants/actionTypes';\nimport * as Actions from '../middleware/actions/index';\nimport { extractParseAttributes } from '../middleware/parseUtils';\nimport {Customer, User, Consumer, ConsumerAddress, Category, Product, Cart, Order, OrderItem, OrderState, Modifier, ModifierItem, OrderItemModifier, PaymentMethod, CreditCard} from '../middleware/models/ParseModels'\n\nconst SERVER_URL = config.get('SERVER_URL');\n\nconst PARSE_APP_ID = config.get('PARSE_APP_ID');\n\nconst PARSE_SERVER_URL = config.get('PARSE_SERVER_URL');\n\nconst PARSE_CLIENT_KEY = config.get('PARSE_CLIENT_KEY');\n\nconst FACEBOOK_APP_ID = config.get('FACEBOOK_APP_ID');\n\nconst GOOGLE_MAPS_URL = config.get('GOOGLE_MAPS_URL');\n\nconst GOOGLE_MAPS_KEY = config.get('GOOGLE_MAPS_KEY');\n\nconst initialState = {\n  userData: {},\n  paymentTypes: {\n    'Nn0joKC5VK': sendCash,\n    'UdK0Ifc4IF': sendCash,\n    'CHzoYrEtiY': sendRegisteredCreditCards\n  },\n  creditCardImages: {\n    'VISA': 'assets/images/visaCard.jpg',\n    'MASTERCARD': 'assets/images/masterCard.jpg',\n    'AMERICAN': 'assets/images/americanCard.jpg',\n    'DINERS': 'assets/images/dinersCard.jpg',\n    'DEFAULT': 'assets/images/creditCards.jpg'\n  }\n};\n\nconst reducer = (state = initialState, action) => {\n  console.log('ACTION');\n  console.log(action);\n  let data = action.data;\n\n  if(data && data.hasOwnProperty('recipientId')){\n    if(typeof state.userData[data.recipientId] == 'undefined'){\n      state.userData[data.recipientId] = {};\n    }\n  }\n\n  switch (action.type) {\n    case types.CUSTOMER_LOADED: {\n      let customer = extractParseAttributes(data.customer);\n      objectAssign(state.userData[data.recipientId], {customer});\n      return {...state};\n    }\n    case types.CONSUMER_LOADED: {\n      let consumer = extractParseAttributes(data.consumer);\n      objectAssign(state.userData[data.recipientId], {consumer});\n      return {...state};\n    }\n    case types.USER_LOADED: {\n      let user = extractParseAttributes(data.user);\n      objectAssign(state.userData[data.recipientId], {user});\n      return {...state};\n    }\n    case types.CONSUMER_ADDRESSES_LOADED: {\n      let addresses = data.addresses.map(a => extractParseAttributes(a));\n      objectAssign(state.userData[data.recipientId], {addresses});\n      return {...state};\n    }\n    case types.SET_CURRENT_ADDRESS: {\n      let address = extractParseAttributes(data.address);\n      objectAssign(state.userData[data.recipientId], {address});\n      return {...state};\n    }\n    case types.PAYMENT_METHODS_LOADED: {\n      let paymentMethods = data.paymentMethods.map(p => extractParseAttributes(p))\n      objectAssign(state.userData[data.recipientId], {paymentMethods})\n      return {...state};\n    }\n    case types.SET_PAYMENT_METHOD: {\n      let paymentMethod = extractParseAttributes(data.paymentMethod);\n      objectAssign(state.userData[data.recipientId], {paymentMethod});\n      return {...state};\n    }\n    case types.SET_ORDERS: {\n      let ongoing = data.orders.ongoing.map(a => extractParseAttributes(a));\n      let delivered = data.orders.delivered.map(a => extractParseAttributes(a));\n      objectAssign(state.userData[data.recipientId], {orders: {ongoing: ongoing, delivered: delivered}});\n      return {...state};\n    }\n    case types.CONSUMER_UPDATED: {\n      return {...state};\n    }\n    case types.CONSUMER_NOT_FOUND: {\n      return {...state};\n    }\n    case types.CONSUMER_ORDERS_LOADED: {\n      let orders = data.orders.map(a => extractParseAttributes(a));\n      objectAssign(state.userData[data.recipientId], {orders});\n      return {...state};\n    }\n    case types.USER_CREDITCARDS_LOADED: {\n      let creditCards = data.creditCards.map(a => extractParseAttributes(a));\n      objectAssign(state.userData[data.recipientId], {creditCards});\n      return {...state};\n    }\n    case types.SET_CUSTOMER_POINT_SALE: {\n      let pointSale = extractParseAttributes(data.pointSale);\n      objectAssign(state.userData[data.recipientId], {pointSale});\n      return {...state};\n    }\n    case types.SET_ORDER: {\n      let order = extractParseAttributes(data.order);\n      objectAssign(state.userData[data.recipientId], {order});\n      return {...state};\n    }\n    case types.SET_USER: {\n      let user = extractParseAttributes(data.user);\n      objectAssign(state.userData[data.recipientId], {user});\n      return {...state};\n    }\n    case types.SET_CONSUMER: {\n      let consumer = extractParseAttributes(data.consumer);\n      objectAssign(state.userData[data.recipientId], {consumer});\n      return {...state};\n    }\n    case types.SET_CUSTOMER:{\n      let customer = extractParseAttributes(data.customer);\n      objectAssign(state.userData[data.recipientId], {customer});\n      return {...state};\n    }\n    case types.SET_ORDER_STATE: {\n      let orderState = extractParseAttributes(data.orderState);\n      objectAssign(state.userData[data.recipientId], {orderState});\n      return {...state};\n    }\n    default:\n      return state;\n  }\n}\n\nlet store = undefined;\n\nbot.rules.set('hola', sendMenu);\nbot.rules.set('iniciar', sendMenu);\nbot.rules.set('empezar', sendMenu);\nbot.rules.set('comenzar', sendMenu);\nbot.rules.set('buenos dias', sendMenu);\nbot.rules.set('buenas tardes', sendMenu);\nbot.rules.set('menú', sendMenu);\nbot.rules.set('pedir domicilio', sendAddressesWithTitle);\nbot.rules.set('carrito', sendCart);\nbot.rules.set('cuenta', sendCart);\nbot.rules.set('mi orden', sendOrders);\nbot.rules.set('mis órdenes', sendOrders);\nbot.rules.set('mi dirección', sendAddresses);\nbot.rules.set('mis direcciones', sendAddresses);\nbot.rules.set('nueva dirección', newAddress);\nbot.rules.set('agregar dirección', newAddress);\nbot.rules.set('mi cuenta', sendAccount);\nbot.rules.set('mi tarjeta', sendCreditCards);\nbot.rules.set('mis tarjetas', sendCreditCards);\nbot.rules.set('nueva tarjeta', registerCreditCard);\nbot.rules.set('agregar tarjeta', registerCreditCard);\n\nbot.rules.set('ayuda', sendHelp);\nbot.rules.set('help', sendHelp);\nbot.rules.set('ok', sendYouAreWelcome);\nbot.rules.set('gracias', sendYouAreWelcome);\n\nbot.payloadRules.set('Greeting', sendMenu);\n\nbot.payloadRules.set('SendAddressesWithTitle', sendAddressesWithTitle);\nbot.payloadRules.set('SendAddresses', sendAddresses);\nbot.payloadRules.set('NewAddress', newAddress);\nbot.payloadRules.set('SetAddressComplement', setAddressComplement);\nbot.payloadRules.set('ConfirmAddress', confirmAddress);\nbot.payloadRules.set('SetAddress', setAddress);\nbot.payloadRules.set('EditAddress', editAddress);\nbot.payloadRules.set('RemoveAddress', removeAddress);\n\nbot.payloadRules.set('SendCategories', sendCategories);\nbot.payloadRules.set('SendProducts', sendProducts);\nbot.payloadRules.set('AddProduct', addProduct);\nbot.payloadRules.set('AddModifier', addModifier);\nbot.payloadRules.set('RemoveProduct', removeProduct);\nbot.payloadRules.set('IncreaseOneProduct', increaseOneProduct);\nbot.payloadRules.set('DecreaseOneProduct', decreaseOneProduct);\nbot.payloadRules.set('SendProductDescription', sendProductDescription);\nbot.payloadRules.set('SendContinueOrder', sendContinueOrder);\n\nbot.payloadRules.set('Search', searchProducts);\nbot.payloadRules.set('SendCart', sendCart);\nbot.payloadRules.set('SendCartDetails', sendCartDetails);\nbot.payloadRules.set('EditCart', editCart);\nbot.payloadRules.set('ClearCart', clearCart);\nbot.payloadRules.set('ClearAndSendCart', clearAndSendCart);\nbot.payloadRules.set('SendPurchaseOptions', sendPurchaseOptions);\n\nbot.payloadRules.set('Checkout', checkout);\nbot.payloadRules.set('CheckPayment', checkPayment);\nbot.payloadRules.set('CheckAddress', checkAddress);\nbot.payloadRules.set('CheckOrder', checkOrder);\nbot.payloadRules.set('RegisterCreditCard', registerCreditCard);\nbot.payloadRules.set('RegisterCreditCardAndPay', registerCreditCardAndPay);\n\nbot.payloadRules.set('SendRegisteredCreditCards', sendRegisteredCreditCards);\nbot.payloadRules.set('CancelRegisterCreditCard', cancelRegisterCreditCard);\nbot.payloadRules.set('PayWithCreditCard', payWithCreditCard);\nbot.payloadRules.set('SendOrders', sendOrders);\nbot.payloadRules.set('SendOrder', sendOrder);\nbot.payloadRules.set('NewOrder', newOrder);\nbot.payloadRules.set('CancelOrder', cancelOrder);\nbot.payloadRules.set('SendCreditCards', sendCreditCards);\nbot.payloadRules.set('RemoveCreditCard', removeCreditCard);\nbot.payloadRules.set('SetScore', setScore);\nbot.payloadRules.set('SendAccount', sendAccount);\nbot.payloadRules.set('SendHelp', sendHelp);\nbot.payloadRules.set('CustomerService', sendHelp);\n\nfunction createLocalStore(reducer){\n  store = redux.createStore(reducer, redux.applyMiddleware(thunk));\n  store.subscribe(() =>\n    console.log('\\n')\n  );\n}\n\nfunction getUserData(recipientId) {\n  if (typeof recipientId !== 'undefined' && typeof store !== 'undefined' && typeof store.getState() !== 'undefined') {\n    let state = store.getState();\n    let data = state.userData;\n    return data[recipientId];\n  }\n}\n\nfunction getData(recipientId, property){\n  if(typeof recipientId !== 'undefined' && typeof store !== 'undefined' && typeof store.getState() !== 'undefined'){\n    let state = store.getState();\n    let data = state.userData;\n    let userData = data[recipientId];\n\n    if(typeof userData == 'undefined'){\n      data[recipientId] = {};\n      userData = data[recipientId];\n    }\n\n    if(typeof property == 'undefined')\n      return userData;\n    else{\n      if(userData.hasOwnProperty(property)){\n        return userData[property];\n      }\n      else\n        return undefined;\n    }\n  }\n  else return undefined;\n}\n\nfunction signUp(recipientId, senderId, facebookId, conversationToken){\n  return User.createUser(store, recipientId, facebookId, conversationToken).then(()=>{\n    let userObject = getData(recipientId, 'user');\n    let user = userObject.rawParseObject;\n\n    return user.createConsumer(store, recipientId, senderId, conversationToken).then(consumer => {\n      return new Promise((resolve, reject) => {\n        resolve(userObject)\n      });\n    });\n  });\n}\n\nfunction login(username, password){\n  return Parse.User.logIn(username, password, {\n    success : user => {\n      //let val = JSON.stringify({sessionToken: user.getSessionToken()});\n      //console.log(val);\n      return user;\n    },\n    error: function(user, error) {\n      console.log('Failed to create new object, with error code: ' + error.message);\n    }});\n}\n\nfunction authentication(recipientId, senderId){\n  return getCustomer(recipientId, senderId).then(customer => {\n    return getUser(recipientId).then(user => {\n      if(typeof user == 'undefined'){\n        return User.createUser(store, recipientId, recipientId, customer.fanpageToken).then(()=>{\n          let userObject = getData(recipientId, 'user');\n          let user = userObject.rawParseObject;\n\n          return user.createConsumer(store, recipientId, senderId, customer.fanpageToken).then(consumer => {\n            return new Promise((resolve, reject) => {\n              resolve(userObject)\n            });\n          });\n        })\n      }\n      else{\n        return getConsumer(recipientId, user.rawParseObject).then(consumer => {\n          return new Promise((resolve, reject) => {\n            resolve(user)\n          });\n        });\n      }\n    });\n  });\n}\n\nfunction getCustomer(recipientId, senderId){\n  let customer = getData(recipientId, 'customer');\n  if(typeof customer == 'undefined'){\n    return Actions.getCustomerByFanpage(senderId).then(customer => {\n      return Customer.loadInStore(store, recipientId, customer.businessId).then(()=>{\n        return getData(recipientId, 'customer');\n      });\n    });\n  }\n  else{\n    return new Promise((resolve, reject) => {\n      resolve(customer)\n    });\n  }\n}\n\nfunction getUser(recipientId){\n  let userObj = getData(recipientId, 'user');\n  if(typeof userObj == 'undefined'){\n    return User.loadInStore(store, recipientId).then(()=>{\n      return getData(recipientId, 'user');\n    });\n  }\n  else{\n    return new Promise((resolve, reject) => {\n      resolve(userObj)\n    });\n  }\n}\n\nfunction getConsumer(recipientId, user){\n  let consumerObj = getData(recipientId, 'consumer');\n\n  if(typeof consumerObj == 'undefined'){\n    return Consumer.loadInStore(store, recipientId, user).then(()=>{\n      consumerObj = getData(recipientId, 'consumer');\n\n      if(typeof consumerObj != 'undefined'){\n        return new Promise((resolve, reject) => {\n          resolve(consumerObj)\n        });\n      }else{\n        console.log('create consumer');\n      }\n    });\n  }\n  else{\n    return new Promise((resolve, reject) => {\n      resolve(consumerObj)\n    });\n  }\n}\n\nfunction sendSignUp(recipientId, senderId) {\n  let image_url = SERVER_URL+\"assets/images/love.jpg\";\n  return bot.sendTypingOn(recipientId, senderId).then(()=> {\n    return bot.sendTypingOff(recipientId, senderId).then(() => {\n      return bot.sendGenericMessage(recipientId, senderId, [{\n        \"title\": \"Hola, soy un Bot\",\n        \"subtitle\": \"Soy tu asistente virtual. Quieres registrarte en nuestro sistema?\",\n        \"image_url\": image_url,\n        \"buttons\": [\n          {\n            \"type\": \"web_url\",\n            \"url\": SERVER_URL + \"login?psid=\" + recipientId,\n            \"title\": \"Registrarme\",\n            \"webview_height_ratio\": \"full\",\n            \"messenger_extensions\": true\n          }\n        ]\n      }]);\n    });\n  });\n};\n\nfunction sendMenu(recipientId, senderId) {\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    authentication(recipientId, senderId).then(() =>{\n      bot.clearListener(recipientId);\n      let customer = getData(recipientId, 'customer');\n      let user = getData(recipientId, 'user');\n      let image_url = customer.image.url;\n      return bot.sendTypingOff(recipientId, senderId).then(()=>{\n        return bot.sendGenericMessage(recipientId, senderId, [{\n          \"title\":     \"Hola \"+user.first_name+\", Bienvenido a \"+customer.name,\n          \"subtitle\":  \"Aquí puedes pedir un domicilio, escribe o selecciona alguna de las opciones:\",\n          \"image_url\": image_url,\n          \"buttons\":[\n            {\n              \"type\":\"postback\",\n              \"title\":\"Pedir domicilio\",\n              \"payload\": \"SendAddressesWithTitle\"\n            },\n            {\n              \"type\":\"postback\",\n              \"title\":\"Servicio al cliente\",\n              \"payload\": \"CustomerService\"\n            }\n          ]\n        }]);\n      });\n    });\n  });\n}\n\nfunction sendAddressesWithTitle(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=> {\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      return bot.sendTextMessage(recipientId, senderId, \"A cual dirección vas hacer tu pedido?\\n\\nPuedes escoger entre agregar una nueva dirección o seleccionar una de tus direcciones guardadas\").then(() => {\n        sendAddresses(recipientId, senderId);\n      });\n    });\n  });\n}\n\nfunction sendAddresses(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=> {\n    authentication(recipientId, senderId).then(() => {\n      bot.clearListener(recipientId);\n      let consumer = getData(recipientId, 'consumer');\n\n      ConsumerAddress.loadInStore(store, recipientId, consumer).then(() => {\n        let addresses = getData(recipientId, 'addresses');\n        let elements = [];\n\n        elements.push({\n          \"title\": \"Nueva dirección\",\n          \"subtitle\": \"Puedes agregar una nueva dirección\",\n          \"image_url\": SERVER_URL+\"assets/images/addAddress.jpg\",\n          \"buttons\": [\n            {\n              \"type\": \"postback\",\n              \"title\": \"Nueva dirección\",\n              \"payload\": \"NewAddress\"\n            }\n          ]\n        });\n\n        for(let address of addresses) {\n          if (elements.length < bot.limit){\n            elements.push({\n              \"title\": address.name,\n              \"subtitle\": address.address +\", \"+address.description+\", \"+address.city+\", \"+address.state,\n              \"image_url\": GOOGLE_MAPS_URL+ \"?center=\"+address.location.lat+\",\"+address.location.lng+\"&zoom=16&size=400x400&markers=color:red%7C\"+address.location.lat+\",\"+address.location.lng+\"&key=\"+GOOGLE_MAPS_KEY,\n              \"buttons\": [\n                {\n                  \"type\": \"postback\",\n                  \"title\": \"Seleccionar\",\n                  \"payload\": \"SetAddress-\"+address.objectId\n                },\n                {\n                  \"type\": \"postback\",\n                  \"title\": \"Modificar\",\n                  \"payload\": \"EditAddress-\"+address.objectId\n                },\n                {\n                  \"type\": \"postback\",\n                  \"title\": \"Quitar\",\n                  \"payload\": \"RemoveAddress-\"+address.objectId\n                }\n              ]\n            });\n          }\n        }\n\n        return bot.sendTypingOff(recipientId, senderId).then(()=>{\n          return bot.sendGenericMessage(recipientId, senderId, elements);\n        });\n      });\n    });\n  });\n}\n\nfunction sendCreditCards(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    authentication(recipientId, senderId).then(() =>{\n      bot.clearListener(recipientId);\n      let state = store.getState();\n      let user = getData(recipientId, 'user');\n      let creditCardsImages = state['creditCardImages'];\n\n      CreditCard.loadInStore(store, recipientId, user).then(() => {\n        let creditCards = getData(recipientId, 'creditCards');\n        let userBuffer = bot.buffer[recipientId];\n        let creditCardImage;\n        let elements = [];\n\n        if(typeof userBuffer != 'undefined' && userBuffer.hasOwnProperty('creditCardPayload')){\n          delete userBuffer.creditCardPayload;\n        }\n\n        elements.push({\n          \"title\": \"Registro de tarjeta\",\n          \"subtitle\": \"Puedes agregar una tarjeta\",\n          \"image_url\": SERVER_URL+\"assets/images/creditCards.jpg\",\n          \"buttons\": [\n            {\n              \"type\": \"postback\",\n              \"title\": \"Nueva tarjeta\",\n              \"payload\": \"RegisterCreditCard\"\n            }\n          ]\n        });\n\n        for(let creditCard of creditCards) {\n          if (elements.length < bot.limit){\n\n            creditCardImage = creditCardsImages.hasOwnProperty(creditCard.type) ? creditCardsImages[creditCard.type] : creditCardsImages['DEFAULT']\n            elements.push({\n              \"title\": creditCard.type+' '+creditCard.lastFour,\n              \"subtitle\": creditCard.cardHolderName,\n              \"image_url\": SERVER_URL+creditCardImage,\n              \"buttons\": [\n                {\n                  \"type\": \"postback\",\n                  \"title\": \"Quitar\",\n                  \"payload\": \"RemoveCreditCard-\"+creditCard.objectId\n                }\n              ]\n            });\n          }\n        }\n\n        return bot.sendTypingOff(recipientId, senderId).then(()=>{\n          return bot.sendGenericMessage(recipientId, senderId, elements);\n        });\n      });\n    });\n  });\n}\n\nfunction newAddress(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=> {\n    return bot.sendTypingOff(recipientId, senderId).then(() => {\n      bot.setDataBuffer(recipientId, 'addressPayload', 'NewAddress');\n      writeAddress(recipientId, senderId);\n    });\n  });\n}\n\nfunction writeAddress(recipientId, senderId){\n  bot.setListener(recipientId, 'address', 'text', addressCheck);\n  bot.setListener(recipientId, 'location', 'attachment', setLocationCheck);\n\n  return bot.sendQuickReplyMessage(\n    recipientId,\n    senderId,\n    \"Puedes escribir o compartir tu ubicación actual?\\n\\nEjemplo: Calle 67 #52-20, Medellín.\\n\\nNo olvides escribir la ciudad al final de la dirección.\",\n    [{\n      \"content_type\": \"location\",\n      \"title\": \"Enviar ubicación\"\n    }]\n  );\n}\n\nfunction sendNullMapMessage(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=> {\n    return bot.sendTypingOff(recipientId, senderId).then(() => {\n      return bot.sendTextMessage(recipientId, senderId, \"La dirección no ha sido encontrada en Google Maps, por favor intenta de nuevo\")\n    });\n  });\n}\n\nfunction sendMap(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    let userBuffer = bot.buffer[recipientId];\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      return bot.sendImageMessage(recipientId, senderId, GOOGLE_MAPS_URL+\"?center=\"+userBuffer.location.lat+\",\"+userBuffer.location.lng+\"&zoom=16&size=400x400&markers=color:red%7C\"+userBuffer.location.lat+\",\"+userBuffer.location.lng+\"&key=\"+GOOGLE_MAPS_KEY).then(()=>{\n        sendMapConfirmation(recipientId, senderId);\n      });\n    });\n  });\n}\n\nfunction sendMapConfirmation(recipientId, senderId){\n  return bot.sendTypingOff(recipientId, senderId).then(()=>{\n    return bot.sendQuickReplyMessage(recipientId, senderId, \"Es correcta?\", [\n      {\n        \"content_type\": \"text\",\n        \"title\": \"Si\",\n        \"payload\": \"SetAddressComplement\"\n      },\n      {\n        \"content_type\": \"text\",\n        \"title\": \"No\",\n        \"payload\": \"NewAddress\"\n      }\n    ]);\n  });\n}\n\nfunction addressCheck(recipientId, senderId){\n  let userBuffer = bot.buffer[recipientId];\n\n  geocoder.geocode(userBuffer.address, (error, data) =>{\n    if(!error && data.status == 'OK'){\n      setAddressComponetsInBuffer(recipientId, senderId, data.results[0]);\n    }\n    else{\n      console.log('Geocode not found');\n      console.log(error);\n      sendNullMapMessage(recipientId, senderId).then(()=>{\n        newAddress(recipientId, senderId)\n      });\n    }\n  });\n}\n\nfunction setAddressComponetsInBuffer(recipientId, senderId, data){\n  return bot.sendTypingOn(recipientId, senderId).then(()=> {\n    let userBuffer = bot.buffer[recipientId];\n    userBuffer.address = data.formatted_address;\n    userBuffer.location = data.geometry.location;\n\n    for (let component of data.address_components) {\n      if (component.types.includes('route')) {\n        userBuffer.route = component.long_name;\n      }\n      else if (component.types.includes('street_number')) {\n        userBuffer.street_number = component.short_name;\n      }\n      else if (component.types.includes('locality')) {\n        userBuffer.locality = component.short_name;\n      }\n      else if (component.types.includes('administrative_area_level_1')) {\n        userBuffer.state = component.short_name;\n      }\n      else if (component.types.includes('administrative_area_level_2')) {\n        userBuffer.administrative_area = component.short_name;\n      }\n      else if (component.types.includes('country')) {\n        userBuffer.country = component.long_name;\n        userBuffer.country_code = component.short_name\n      }\n      else if (component.types.includes('postal_code')) {\n        userBuffer.postal_code = component.short_name;\n      }\n    }\n\n    return bot.sendTypingOff(recipientId, senderId).then(() => {\n      return bot.sendTextMessage(recipientId, senderId, \"Encontré esta dirección en Google Maps:\\n\\n\" + userBuffer.address).then(() => {\n        sendMap(recipientId, senderId);\n      });\n    });\n  });\n}\n\nfunction setAddressComplement(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=> {\n    bot.setListener(recipientId, 'complement', 'text', confirmAddress);\n\n    return bot.sendTypingOff(recipientId, senderId).then(() => {\n      return bot.sendTextMessage(recipientId, senderId, \"Por favor escribe el complemento de tu dirección actual.\\n\\nEjemplo: Apto 303, edificio el palmar.\\n\\nNo olvides colocar el nombre del edificio o del barrio\");\n    });\n  });\n}\n\nfunction confirmAddress(recipientId, senderId){\n  let userBuffer = bot.buffer[recipientId];\n  let addressPayload = userBuffer['addressPayload'];\n\n  if(addressPayload == 'NewAddress'){\n    return bot.sendTypingOn(recipientId, senderId).then(()=>{\n      bot.setListener(recipientId, 'address_name', 'text', saveAddress);\n      return bot.sendTypingOff(recipientId, senderId).then(()=>{\n        return bot.sendTextMessage(recipientId, senderId, \"Por favor coloca un nombre a esta dirección para guardarla. \\n\\nEjemplo: casa, apartamento o oficina\");\n      });\n    });\n  }\n  else if(addressPayload.startsWith('EditAddress')){\n    return bot.sendTypingOn(recipientId, senderId).then(()=>{\n      let data = addressPayload.split('-');\n      let location = new Parse.GeoPoint({latitude: parseFloat(userBuffer.location.lat), longitude: parseFloat(userBuffer.location.lng)});\n\n      new Parse.Query(ConsumerAddress).get(data[1]).then((consumerAddress) => {\n\n        consumerAddress.set('address', userBuffer.route+\" # \"+userBuffer.street_number);\n        consumerAddress.set('location', location);\n        consumerAddress.set('country', userBuffer.country);\n        consumerAddress.set('countryCode', userBuffer.country_code);\n        consumerAddress.set('postalCode', userBuffer.postal_code);\n        consumerAddress.set('state', userBuffer.state);\n        consumerAddress.set('description', userBuffer.complement);\n\n        consumerAddress.save(undefined, {\n          success: function(address) {\n            delete userBuffer.address;\n            delete userBuffer.location;\n            delete userBuffer.complement;\n\n            return bot.sendTypingOff(recipientId, senderId).then(()=>{\n              return bot.sendTextMessage(recipientId, senderId, \"La dirección ha sido actualizada.\").then(()=>{\n                setAddress(recipientId, senderId, address.id);\n              })\n            });\n          },\n          error: function(user, error) {\n            console.log('Failed to create new object, with error code: ' + error.message);\n          }\n        });\n      });\n    });\n  }\n}\n\nfunction saveAddress(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    let consumer = getData(recipientId, 'consumer');\n    let userBuffer = bot.buffer[recipientId];\n    let location = new Parse.GeoPoint({latitude: parseFloat(userBuffer.location.lat), longitude: parseFloat(userBuffer.location.lng)});\n\n    let consumerAddress = new ConsumerAddress();\n    consumerAddress.set('name', userBuffer.address_name);\n    consumerAddress.set('address', userBuffer.route+\" # \"+userBuffer.street_number);\n    consumerAddress.set('consumer', {\n      __type: \"Pointer\",\n      className: \"Consumer\",\n      objectId: consumer.objectId\n    });\n    consumerAddress.set('location', location);\n    consumerAddress.set('city', userBuffer.locality);\n    consumerAddress.set('country', userBuffer.country);\n    consumerAddress.set('countryCode', userBuffer.country_code);\n    consumerAddress.set('postalCode', userBuffer.postal_code);\n    consumerAddress.set('state', userBuffer.state);\n    consumerAddress.set('description', userBuffer.complement);\n\n    consumerAddress.save(undefined, {\n      success: function(result) {\n\n        delete userBuffer.address;\n        delete userBuffer.location;\n        delete userBuffer.complement;\n        delete userBuffer['address_name'];\n\n        return bot.sendTypingOff(recipientId, senderId).then(()=>{\n          return bot.sendTextMessage(recipientId, senderId, \"La dirección ha sido almacenada.\").then(()=>{\n            setAddress(recipientId, senderId, result.id)\n          })\n        });\n      },\n      error: function(user, error) {\n        console.log('Failed to create new object, with error code: ' + error.message);\n      }\n    });\n  });\n}\n\nfunction setEmail(recipientId, senderId){\n  bot.setListener(recipientId, 'email', 'text', setEmailCheck);\n\n  return bot.sendTypingOff(recipientId, senderId).then(()=>{\n    return bot.sendTextMessage(recipientId, senderId, \"Por favor escribe tu email:\")\n  });\n}\n\nfunction setEmailCheck(recipientId, senderId){\n  let userBuffer = bot.buffer[recipientId];\n  let consumer = getData(recipientId, 'consumer').rawParseObject;\n\n  consumer.setEmail(userBuffer.email);\n  consumer.saveInStore(store, recipientId).then(()=>{\n    delete userBuffer.email;\n    checkOrder(recipientId, senderId)\n  });\n}\n\nfunction setTelephone(recipientId, senderId){\n  bot.setListener(recipientId, 'telephone', 'text', setTelephoneCheck);\n  return bot.sendTypingOff(recipientId, senderId).then(()=>{\n    return bot.sendTextMessage(recipientId, senderId, \"Por favor escribe tu número telefónico:\")\n  });\n}\n\nfunction setTelephoneCheck(recipientId, senderId){\n  let userBuffer = bot.buffer[recipientId];\n  let consumer = getData(recipientId, 'consumer').rawParseObject;\n\n  consumer.setPhone(userBuffer.telephone);\n  consumer.saveInStore(store, recipientId).then(()=>{\n    delete userBuffer.telephone;\n    checkOrder(recipientId, senderId)\n  });\n}\n\nfunction setLocationCheck(recipientId, senderId){\n  let userBuffer = bot.buffer[recipientId];\n\n  geocoder.reverseGeocode( userBuffer.location.lat, userBuffer.location.lng, (error, data) =>{\n    if(!error && data.status == 'OK'){\n      setAddressComponetsInBuffer(recipientId, senderId, data.results[0])\n    }\n    else{\n      console.log('Geocode not found');\n      console.log(error);\n      sendNullMapMessage(recipientId, senderId).then(()=>{\n        newAddress(recipientId, senderId)\n      });\n    }\n  });\n}\n\nfunction setAddress(recipientId, senderId, id){\n  let customer = getData(recipientId, 'customer');\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    store.dispatch(Actions.setAddress(recipientId, id)).then(() => {\n        let address = getData(recipientId, 'address');\n        Parse.Cloud.run('getProducts', { businessId: customer.businessId, lat: address.location.lat, lng: address.location.lng}).then(\n          function(result){\n            let pointSale = result.pointSale;\n            store.dispatch(Actions.setCustomerPointSale(recipientId, pointSale.id)).then(() => {\n              return bot.sendTypingOff(recipientId, senderId).then(()=>{\n                return bot.sendTextMessage(recipientId, senderId, \"Perfecto, ya seleccioné tu dirección para este pedido\").then(()=>{\n                  sendCategories(recipientId, senderId, 0);\n                })\n              });\n            });\n          },\n          function(error) {\n            if(error.code == '141'){\n              return bot.sendTypingOff(recipientId, senderId).then(()=>{\n                return bot.sendTextMessage(recipientId, senderId, \"La dirección seleccionada no está dentro de la cobertura de nuestras sedes, por favor intenta con otra dirección\").then(()=>{\n                  sendAddressesWithTitle(recipientId, senderId)\n                });\n              });\n            }\n            else{\n              console.log('error');\n              console.log(error);\n            }\n          });\n      }\n    );\n  });\n}\n\nfunction editAddress(recipientId, senderId, id){\n  return bot.sendTypingOn(recipientId, senderId).then(()=> {\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      bot.setDataBuffer(recipientId, 'addressPayload', 'EditAddress-'+id);\n      writeAddress(recipientId, senderId);\n    });\n  });\n}\n\nfunction removeAddress(recipientId, senderId, id){\n  return bot.sendTypingOn(recipientId, senderId).then(()=> {\n    new Parse.Query(ConsumerAddress).get(id).then((consumerAddress) => {\n      consumerAddress.destroy().then(()=>{\n        return bot.sendTypingOff(recipientId, senderId).then(()=>{\n          return bot.sendTextMessage(recipientId, senderId, \"La dirección ha sido eliminada.\").then(()=>{\n            sendAddresses(recipientId, senderId);\n          })\n        });\n      });\n    });\n  });\n}\n\nfunction removeCreditCard(recipientId, senderId, id){\n  return bot.sendTypingOn(recipientId, senderId).then(()=> {\n    new Parse.Query(CreditCard).get(id).then((creditCard) => {\n      creditCard.destroy().then(() => {\n        return bot.sendTypingOff(recipientId, senderId).then(() => {\n          return bot.sendTextMessage(recipientId, senderId, \"La tarjeta de credito ha sido eliminada.\").then(() => {\n            sendCreditCards(recipientId, senderId);\n          });\n        });\n      });\n    });\n  });\n}\n\nfunction sendCategories(recipientId, senderId, index){\n  let customer = getData(recipientId, 'customer');\n\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    authentication(recipientId, senderId).then(()=>{\n      bot.clearListener(recipientId);\n      Parse.Cloud.run('getProducts', { businessId: customer.businessId }).then(function(result){\n          if(result.pointSaleIsOpen) {\n            if(typeof index == 'undefined')\n              index = 0;\n            else if( typeof index == 'string')\n              index = parseInt(index);\n\n            if(index == 0){\n              bot.sendTypingOff(recipientId, senderId).then(()=>{\n                bot.sendTextMessage(recipientId, senderId, \"A continuación te presentamos las categorías de productos disponibles.\").then(()=>{\n                  sendCategoriesDetail(recipientId, senderId, result.categories, index);\n                })\n              });\n            }else{\n              bot.sendTypingOff(recipientId, senderId).then(()=>{\n                sendCategoriesDetail(recipientId, senderId, result.categories, index);\n              });\n            }\n          }else{\n            sendScheduleRestriction(recipientId, senderId, result.pointSaleSchedules);\n          }\n        },\n        function(error) {\n          console.log('error');\n          console.log(error);\n        });\n    });\n  });\n}\n\nfunction splitCategories(recipientId, categories, index){\n  let customer = getData(recipientId, 'customer');\n  let image_url;\n\n  let idx = 0;\n  let elements = [];\n\n  categories.forEach(function(item){\n    if(item && item.get('name')){\n      if(idx >= (index)*bot.limit && idx < (index+1)*bot.limit){\n        let image = item.get('image');\n        image_url = (typeof image != 'undefined') ? image.url() : customer.image.url;\n        elements.push({\n          title: item.get('name'),\n          image_url: image_url,\n          buttons: [{\n            type: \"postback\",\n            title: 'Ver categoría',\n            payload: \"SendProducts-\"+item.id+\"-0\",\n          }]\n        })\n      }\n      idx = idx+1;\n    }\n  });\n  return elements;\n}\n\nfunction sendCategoriesDetail(recipientId, senderId, categories, index){\n  let elements = splitCategories(recipientId, categories, index);\n  let idx = Object.keys(categories).length;\n  let buttons = [];\n  let catIni = (index + 1) * bot.limit;\n  let catFin = (idx > catIni + bot.limit) ? catIni + bot.limit : idx;\n\n  if (idx > (index + 1) * bot.limit) {\n    buttons.push({\n      type: \"postback\",\n      title: \"Categorías \" + (catIni + 1) + \"-\" + catFin,\n      payload: \"SendCategories-\" + (index + 1),\n    });\n\n    elements.push({\n      title: \"Ver más categorias \",\n      subtitle: \"Categorías disponibles\",\n      buttons: buttons\n    });\n  }\n\n  return bot.sendTypingOff(recipientId, senderId).then(()=>{\n    return bot.sendGenericMessage(recipientId, senderId, elements)\n  });\n}\n\nfunction sendProducts(recipientId, senderId, categoryId, proIdx){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    bot.clearListener(recipientId);\n    proIdx = parseInt(proIdx);\n    if(proIdx == 0){\n      new Parse.Query(Category).get(categoryId).then(category => {\n          return bot.sendTypingOff(recipientId, senderId).then(()=>{\n            return bot.sendTextMessage(recipientId, senderId, \"Selecciona \"+category.get('name')+\":\").then(()=>{\n              getProducts(recipientId, senderId, categoryId, proIdx);\n            })\n          });\n        },\n        (object, error) => {\n          console.log(error);\n        });\n    }\n    else{\n      getProducts(recipientId, senderId, categoryId, proIdx)\n    }\n  });\n}\n\nfunction getProducts(recipientId, senderId, categoryId, proIdx){\n  let customer = getData(recipientId, 'customer');\n\n  Parse.Cloud.run('getProducts', { businessId: customer.businessId, category: categoryId }).then(result => {\n      if(result.hasOwnProperty('categories')){\n        sendCategoriesDetail(recipientId, senderId, result.categories, 0);\n      }else{\n        if(result.products.length == 0){\n          bot.sendTypingOff(recipientId, senderId).then(()=>{\n            bot.sendQuickReplyMessage(recipientId, senderId,\n              \"No existen productos en esta categoría\",\n              [{\n                \"content_type\": \"text\",\n                \"title\": \"Seguir pidiendo\",\n                \"payload\": \"SendContinueOrder\"\n              },\n                {\n                  \"content_type\": \"text\",\n                  \"title\": \"Ver carrito\",\n                  \"payload\": \"SendCart\"\n                }]);\n          });\n        }\n        else{\n          sendProductsDetail(recipientId, senderId, categoryId, result.products, proIdx);\n        }\n      }\n    },\n    function(error) {\n      console.log('error');\n      console.log(error);\n    })\n}\n\nfunction splitProducts(recipientId, products, proIdx){\n  let customer = getData(recipientId, 'customer');\n  let image_url;\n\n  let idx = 0;\n  let elements = [];\n\n  products.forEach(function(product){\n    if(product && product.get('name')){\n      if(idx >= (proIdx)*bot.limit && idx < (proIdx+1)*bot.limit){\n        let image = product.get('image');\n        image_url = (typeof image != 'undefined') ? image.url() : customer.image.url;\n\n        elements.push({\n          title: product.get('name') +\": $\"+ product.get('priceDefault'),\n          subtitle: product.get('description'),\n          image_url: image_url,\n          buttons: [{\n            type: \"postback\",\n            title: \"Agregar\",\n            payload: \"AddProduct-\"+product.id,\n          },\n            {\n              type: \"postback\",\n              title: 'Ver descripción',\n              payload: \"SendProductDescription-\"+product.id,\n            }]\n        })\n      }\n      idx = idx+1;\n    }\n  });\n  return elements;\n}\n\nfunction sendProductsDetail(recipientId, senderId, categoryId, products, index){\n  let elements = splitProducts(recipientId, products, index);\n  let idx = Object.keys(products).length;\n  let buttons = [];\n  let catIni = (index+1)*bot.limit;\n  let catFin =  (idx > catIni+bot.limit) ? catIni+bot.limit : idx;\n\n  if(idx > (index+1)*bot.limit){\n    buttons.push({\n      type: \"postback\",\n      title: \"Productos \"+(catIni+1)+\"-\"+catFin,\n      payload: \"SendProducts-\"+categoryId+\"-\"+(index+1),\n    });\n\n    elements.push({\n      title: \"Ver más productos \",\n      subtitle: \"Productos disponibles\",\n      buttons: buttons\n    });\n  }\n\n  return bot.sendTypingOff(recipientId, senderId).then(()=>{\n    return bot.sendGenericMessage(recipientId, senderId, elements)\n  });\n}\n\nfunction createCart(recipientId){\n  let userData = getUserData(recipientId);\n  objectAssign(userData, {'cart': {items: new Map()}});\n  return userData.cart;\n}\n\nfunction addProduct(recipientId, senderId, productId){\n  let cart = getData(recipientId, 'cart');\n\n  if(typeof cart == 'undefined'){\n    cart = createCart(recipientId);\n  }\n\n  let items = cart.items;\n\n  new Parse.Query(Product).get(productId).then(product => {\n      let productObject = extractParseAttributes(product);\n      let item = items.get(productId);\n      let promises = [];\n\n      if(typeof item == 'undefined'){\n        items.set(productId, {quantity: 1, price: productObject.priceDefault});\n        item = items.get(productId);\n      }\n      else{\n        item.quantity += 1;\n      }\n\n      if(typeof item.modifiers == 'undefined'){\n        item.modifiers = [];\n      }\n\n      if(typeof productObject.modifiers != 'undefined'){\n        productObject.modifiers.forEach(function(obj, index, array){\n          promises.push(new Parse.Query(Modifier).get(obj.objectId).then(modifier => {\n            return extractParseAttributes(modifier);\n          }));\n        });\n      }\n\n      Parse.Promise.when(promises).then(function(modifiers) {\n\n        let undefinedModifiers = checkModifiers(recipientId, productId, modifiers);\n\n        //checkModifiersComplete(recipientId, productId, modifiers).then(result =>{\n        //    console.log('result: '+result);\n        //});\n        if(undefinedModifiers.length > 0){\n          //Show multiples modifiers\n          promises = [];\n\n          undefinedModifiers[0].items.forEach(function (modifierItem) {\n            promises.push(new Parse.Query(ModifierItem).get(modifierItem.objectId).then(modifierItem => {\n              return extractParseAttributes(modifierItem);\n            }));\n          });\n\n          Parse.Promise.when(promises).then(function (modifierItems) {\n            sendModifierMenu(recipientId, senderId, productId, undefinedModifiers[0], modifierItems);\n          })\n        }\n        else{\n          saveCart(recipientId);\n          sendAddProductNenu(recipientId, senderId, productId);\n        }\n      });\n    },\n    (object, error) => {\n      console.log(error);\n    });\n}\n\nfunction sendAddProductNenu(recipientId, senderId, productId){\n  return new Parse.Query(Product).get(productId).then(product => {\n      return bot.sendTypingOff(recipientId, senderId).then(()=>{\n        return bot.sendQuickReplyMessage(recipientId, senderId, \"El producto \" + product.get('name') + \" ha sido agregado.\\n\\nDeseas seguir pidiendo o ver tu carrito?\", [\n          {\n            \"content_type\": \"text\",\n            \"title\": \"Seguir pidiendo\",\n            \"payload\": \"SendContinueOrder\"\n          },\n          {\n            \"content_type\": \"text\",\n            \"title\": \"Ver carrito\",\n            \"payload\": \"SendCart\"\n          }\n        ])\n      });\n    },\n    (object, error) => {\n      console.log(error);\n    })\n}\n\nfunction sendContinueOrder(recipientId, senderId){\n  return bot.sendTypingOff(recipientId, senderId).then(()=>{\n    bot.sendTextMessage(recipientId, senderId, \"Puedes escribir el nombre de un producto, ej: Ensalada mediterranea, o seleccionarlo en el siguiente menú:\").then(()=>{\n      sendCategories(recipientId, senderId, 0);\n    })\n  });\n}\n\nfunction sendModifierMenu(recipientId, senderId, productId, modifier, items){\n  let quick_replies = [];\n\n  items.forEach(function (item){\n    if(quick_replies.length <= bot.limit){\n      quick_replies.push({\n        \"content_type\": \"text\",\n        \"title\": item.name,\n        \"payload\": \"AddModifier-\"+productId+\"-\"+modifier.objectId+\"-\"+item.objectId\n      });\n    }\n  });\n\n  return bot.sendTypingOff(recipientId, senderId).then(()=>{\n    return bot.sendQuickReplyMessage(recipientId, senderId, \"Escoge \" + modifier.name + \":\", quick_replies)\n  })\n}\n\nfunction addModifier(recipientId, senderId, productId, modifierId, itemId){\n  let cart = getData(recipientId, 'cart');\n  let items = cart.items;\n  let item = items.get(productId);\n  let orderItemModifier = new OrderItemModifier();\n\n  orderItemModifier.set('modifier', {\n    __type: \"Pointer\",\n    className: \"Modifier\",\n    objectId: modifierId\n  });\n\n  orderItemModifier.set('modifierItem', {\n    __type: \"Pointer\",\n    className: \"ModifierItem\",\n    objectId: itemId\n  });\n\n  //orderItemModifier.set('price', itemId.price)\n\n  orderItemModifier.save(undefined, {\n    success: function(result) {\n      item.modifiers.push({\n        __type: \"Pointer\",\n        className: \"OrderItemModifier\",\n        objectId: result.id\n      });\n\n      saveCart(recipientId);\n      sendAddProductNenu(recipientId, senderId, productId)\n    },\n    error: function(user, error) {\n      console.log('Failed to create new object, with error code: ' + error.message);\n    }\n  });\n\n}\n\nfunction checkModifiers(recipientId, productId, modifiers){\n  let cart = getData(recipientId, 'cart');\n  let items = cart.items;\n  let item = items.get(productId);\n  let exist = false;\n  let result = [];\n\n  modifiers.forEach(function (modifier) {\n    exist = false;\n\n    item.modifiers.forEach(function (itemModifier){\n      console.log(itemModifier.objectId)\n      //exist true\n    });\n\n    if(!exist){\n      result.push(modifier);\n    }\n  });\n\n  return result;\n}\n\nfunction checkModifiersComplete(recipientId, senderId, productId, modifiers){\n  let cart = getData(recipientId, 'cart');\n  let items = cart.items;\n  let item = items.get(productId);\n  let promises = [];\n\n  console.log(modifiers);\n  console.log(modifiers.length)\n  console.log(cart.items);\n  console.log(item);\n  console.log(item.modifiers.length);\n\n  if(modifiers.length != item.modifiers.length){\n    promises = [];\n    modifiers.forEach(function (modifier) {\n      modifier.items.forEach(function (modifierItem) {\n        promises.push(new Parse.Query(ModifierItem).get(modifierItem.objectId).then(modifierItem => {\n          return extractParseAttributes(modifierItem);\n        }));\n      });\n\n      return Parse.Promise.when(promises).then(function (elements) {\n        sendModifierMenu(recipientId, senderId, productId, modifier, elements);\n        return true;\n      });\n    });\n  }\n\n}\n\nfunction removeProduct(recipientId, senderId, productId){\n  let cart = getData(recipientId, 'cart');\n  if(cart == undefined){\n    cart = createCart(recipientId);\n  }\n\n  let items = cart.items;\n  let item = items.get(productId);\n\n  new Parse.Query(OrderItem).get(item.id, {\n    success: (orderItem) => {\n      orderItem.destroy({});\n      items.delete(productId);\n      let itemsPointers = [];\n\n      for(let [key, value] of items) {\n        itemsPointers.push({\"__type\": \"Pointer\", \"className\": \"OrderItem\", \"objectId\": value.id})\n      }\n\n      cart.itemsPointers = itemsPointers;\n      if(items.size == 0){\n        sendCart(recipientId, senderId);\n      }\n      else{\n        sendCartDetails(recipientId, senderId)\n      }\n    },\n    error: (orderItem, error) => {\n      console.log('error');\n      console.log(error);\n    }\n  });\n}\n\nfunction increaseOneProduct(recipientId, senderId, productId){\n  let cart = getData(recipientId, 'cart');\n\n  if(cart == undefined){\n    cart = createCart(recipientId);\n  }\n\n  let items = cart.items;\n  let item = items.get(productId);\n\n  item.quantity++;\n\n  new Parse.Query(OrderItem).get(item.id, {\n    success: (orderItem) => {\n      orderItem.set('amount', item.quantity);\n      orderItem.save();\n      sendCartDetails(recipientId, senderId)\n    },\n    error: (orderItem, error) => {\n      console.log('error');\n      console.log(error);\n    }\n  });\n}\n\nfunction decreaseOneProduct(recipientId, senderId, productId){\n  let cart = getData(recipientId, 'cart');\n\n  if(cart == undefined){\n    cart = createCart(recipientId);\n  }\n\n  let items = cart.items;\n  let item = items.get(productId);\n\n  item.quantity--;\n\n  if(item.quantity > 0){\n    new Parse.Query(OrderItem).get(item.id, {\n      success: (orderItem) => {\n        orderItem.set('amount', item.quantity);\n        orderItem.save();\n        sendCartDetails(recipientId, senderId)\n      },\n      error: (orderItem, error) => {\n        console.log('error');\n        console.log(error);\n      }\n    });\n  }\n  else{\n    removeProduct(recipientId, senderId, productId)\n  }\n}\n\nfunction sendProductDescription(recipientId, senderId, productId){\n  let product = new Product();\n\n  new Parse.Query(product).get(productId).then(\n    product => {\n      return bot.sendTypingOff(recipientId, senderId).then(()=>{\n        return bot.sendQuickReplyMessage(recipientId, senderId, product.get('name')+\": \"+product.get('description'), [\n          {\n            \"content_type\":\"text\",\n            \"title\":\"Agregar\",\n            \"payload\":\"AddProduct-\"+productId\n          },\n          {\n            \"content_type\":\"text\",\n            \"title\":\"Seguir pidiendo\",\n            \"payload\":\"SendContinueOrder\"\n          },\n          {\n            \"content_type\":\"text\",\n            \"title\":\"Ver carrito\",\n            \"payload\":\"SendCart\"\n          }\n        ])\n      });\n    },\n    (object, error) => {\n      console.log(error);\n    }\n  );\n}\n\nfunction saveCart(recipientId){\n  let consumerCart = new Cart();\n  let consumer = getData(recipientId, 'consumer');\n  let address = getData(recipientId, 'address');\n  let cart = getData(recipientId, 'cart');\n  let paymentMethod = getData(recipientId, 'paymentMethod');\n  let items = [];\n  let item;\n\n  for(let [id, properties] of cart.items){\n\n    item = new OrderItem();\n\n    if(properties.hasOwnProperty('id')){\n      item.set('id', properties.id);\n    }\n\n    item.set('product', {\n      __type: \"Pointer\",\n      className: \"Product\",\n      objectId: id\n    });\n    item.set('price', properties.price);\n    item.set('amount', properties.quantity);\n    item.set('modifiers', properties.modifiers);\n    item.set('modifiersGroups', []);\n    items.push(item);\n  }\n\n  Parse.Object.saveAll(items, {\n    success: function(result) {\n      let itemsPointers = [];\n      for(let item of result){\n        let itemId = item.get('product').objectId;\n        cart.items.get(itemId).id = item.id;\n\n        itemsPointers.push({\"__type\":\"Pointer\", \"className\": \"OrderItem\", \"objectId\": item.id})\n      }\n\n      if(cart.hasOwnProperty('id')){\n        consumerCart.set('id', cart.id);\n      }\n\n      if(typeof paymentMethod != 'undefined'){\n        consumerCart.set('paymentMethod', paymentMethod.method)\n      }\n\n      consumerCart.set('consumerAddress', {\n        __type: \"Pointer\",\n        className: \"ConsumerAddress\",\n        objectId: address.objectId\n      });\n      consumerCart.set('consumer', {\n        __type: \"Pointer\",\n        className: \"Consumer\",\n        objectId: consumer.objectId\n      });\n      consumerCart.set('items', itemsPointers);\n\n      consumerCart.save(undefined, {\n        success: function(result) {\n          cart['id'] = result.id;\n          cart['rawParseObject'] = result;\n          cart['itemsPointers'] = itemsPointers;\n        },\n        error: function(user, error) {\n          console.log('Failed to create new object, with error code: ' + error.message);\n        }\n      });\n    },\n    error: function(user, error) {\n      console.log('Failed to create new object, with error code: ' + error.message);\n    }\n  });\n}\n\nfunction saveOrder(recipientId, senderId){\n  getOrderState(0).then(state=>{\n    let order = new Order();\n    let consumer = getData(recipientId, 'consumer');\n    let customer = getData(recipientId, 'customer');\n    let cart = getData(recipientId, 'cart');\n    let address = getData(recipientId, 'address');\n    let paymentMethod = getData(recipientId, 'paymentMethod');\n    let pointSale = getData(recipientId, 'pointSale');\n    let total = 0 ;\n\n    cart.items.forEach(function(value, key){\n      total += value.quantity * value.price;\n    });\n\n    order.set('consumer', { __type: 'Pointer', className: 'Consumer', objectId: consumer.objectId });\n    order.set('consumerAddress', { __type: 'Pointer', className: 'ConsumerAddress', objectId: address.objectId });\n    order.set('pointSale', { __type: 'Pointer', className: 'CustomerPointSale', objectId: pointSale.objectId });\n    order.set('state', { __type: 'Pointer', className: 'OrderState', objectId: state.objectId });\n    order.set('items', cart.itemsPointers);\n    order.set('deliveryCost', pointSale.deliveryCost);\n    order.set('total', total);\n    order.set('paymentMethod', paymentMethod.method);\n    order.set('name', consumer.name);\n    order.set('email', consumer.email);\n    order.set('phone', consumer.phone);\n    order.set('platform', 'Bot');\n\n    order.save(undefined, {\n      success: function(order) {\n\n        store.dispatch(Actions.setOrder(recipientId, order)).then(() => {\n          clearCart(recipientId);\n        });\n      },\n      error: function(user, error) {\n        console.log('Failed to create new object, with error code: ' + error.message);\n        console.log(error);\n      }\n    });\n  });\n}\n\nfunction sendPurchaseOptions(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      return bot.sendQuickReplyMessage(recipientId, senderId, \"Tenemos las siguientes opciones disponibles:\", [\n        {\n          \"content_type\":\"text\",\n          \"title\":\"Ver categorias\",\n          \"payload\":\"SendCategories-0\"\n        },\n        {\n          \"content_type\":\"text\",\n          \"title\":\"Ver carrito\",\n          \"payload\":\"SendCart\"\n        }\n      ])\n    });\n  });\n}\n\nfunction sendEmptyCartOptions(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      return bot.sendQuickReplyMessage(recipientId, senderId, \"Tenemos las siguientes opciones disponibles:\", [\n        {\n          \"content_type\":\"text\",\n          \"title\":\"Ver categorias\",\n          \"payload\":\"SendCategories-0\"\n        },\n        {\n          \"content_type\":\"text\",\n          \"title\":\"Mis órdenes\",\n          \"payload\":\"SendOrders\"\n        }\n      ])\n    });\n  });\n}\n\nfunction sendCart(recipientId, senderId){\n  bot.sendTypingOn(recipientId, senderId).then(()=>{\n    authentication(recipientId, senderId).then( () =>{\n      bot.clearListener(recipientId);\n      let user = getData(recipientId, 'user');\n      let customer = getData(recipientId, 'customer');\n      let cart = getData(recipientId, 'cart');\n      let customer_image_url;\n\n      if(typeof customer != 'undefined'){\n        customer_image_url = customer.image.url;\n      }\n\n      if(cart == undefined){\n        cart = createCart(recipientId);\n      }\n\n      let items = cart.items;\n      let elements = [];\n      let element = {};\n      let total = 0;\n      let orderLimit = items.size;\n      let ind = 0;\n      let image;\n      let image_url;\n\n      if(orderLimit == 0){\n        bot.sendTypingOff(recipientId, senderId).then(()=>{\n          return bot.sendTextMessage(recipientId, senderId, \"Tu carrito de compras está vacío.\").then(()=>{\n            sendEmptyCartOptions(recipientId, senderId);\n          })\n        });\n      }\n      else{\n        items.forEach(function(value, key){\n          let product = new Parse.Query(Product);\n\n          product.get(key, {\n            success: function (item) {\n              image = item.get('image');\n              image_url = customer_image_url\n              if(image){\n                image_url = image.url();\n              }\n\n              element = {};\n              element['title'] = item.get('name');\n              element['subtitle'] = item.get('description');\n              element['quantity'] = value.quantity;\n              element['price'] = parseInt(item.get('priceDefault'));\n              element['currency'] = \"COP\";\n              element['image_url'] = image_url;\n\n              elements.push(element);\n              total += element['quantity']*element['price'];\n\n              ind++;\n\n              if(ind == orderLimit){\n                sendCartReceipt(recipientId, senderId, cart.id, elements, total)\n              }\n            },\n            error: function (error) {\n              alert(\"Error: \" + error.code + \" \" + error.message);\n            }\n          })\n        });\n      }\n    });\n  });\n}\n\nfunction sendCartReceipt(recipientId, senderId, cartId, elements, total){\n  let user = getData(recipientId, 'user');\n  let consumer = getData(recipientId, 'consumer');\n  let address = getData(recipientId, 'address');\n  let pointSale = getData(recipientId, 'pointSale');\n  let payment_method = getData(recipientId, 'payment_method');\n  let addressData = undefined;\n\n  if(typeof pointSale == 'undefined'){\n    bot.sendTextMessage(recipientId, senderId, \"No has registrado una dirección correcta, por favor registrala para visualizar el carrito\").then(()=>{\n      sendAddresses(recipientId, senderId)\n    });\n  }\n  else{\n    if(typeof address != 'undefined'){\n      addressData = {\n        street_1: address.address ? address.address : 'Dirección no definida',\n        street_2: address.description ? address.description : 'Sin complemento',\n        city: address.city ? address.city : 'No definida',\n        postal_code: address.postalCode ? address.postalCode : 'No definido',\n        state: address.state ? address.state : 'No definido',\n        country: address.countryCode ? address.countryCode : 'No definido'\n      }\n    }\n\n    if(typeof payment_method == 'undefined') {\n      payment_method = {name: 'Sin definir'}\n    }\n\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      return bot.sendReceiptMessage(recipientId, senderId, {\n          template_type: \"receipt\",\n          recipient_name: user.first_name+\" \"+user.last_name,\n          order_number: cartId,\n          currency: \"COP\",\n          payment_method: payment_method.name,\n          timestamp: Math.trunc(Date.now()/1000).toString(),\n          elements: elements,\n          address: addressData,\n          summary: {\n            subtotal: total,\n            shipping_cost: pointSale.deliveryCost,\n            total_cost: total+pointSale.deliveryCost\n          }\n        },\n        [\n          {\n            \"content_type\":\"text\",\n            \"title\":\"Finalizar pedido\",\n            \"payload\":\"CheckOrder\"\n          },\n          {\n            \"content_type\":\"text\",\n            \"title\":\"Seguir Pidiendo\",\n            \"payload\":\"SendContinueOrder\"\n          },\n          {\n            \"content_type\":\"text\",\n            \"title\":\"Modificar carrito\",\n            \"payload\":\"SendCartDetails\"\n          },\n          {\n            \"content_type\":\"text\",\n            \"title\":\"Borrar carrito\",\n            \"payload\": \"ClearAndSendCart\"\n          }\n        ])\n    });\n  }\n}\n\nfunction sendCartDetails(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    let cart = getData(recipientId, 'cart');\n    let customer = getData(recipientId, 'customer');\n    let consumer = getData(recipientId, 'consumer');\n    let image_url = customer.image.url;\n    let items = cart.items;\n    let promises = [];\n\n    items.forEach(function(value, key) {\n      if (promises.length <= bot.limit) {\n        promises.push(new Parse.Query(Product).get(key).then(product => {\n          let image = product.get('image');\n          if(image){\n            image_url = image.url();\n          }\n\n          return {\n            \"title\": product.get('name')+\": $\"+value.price,\n            \"subtitle\": \"Cantidad solicitada: \"+value.quantity,\n            \"image_url\": image_url,\n            \"buttons\": [\n              {\n                \"type\": \"postback\",\n                \"title\": \"Quitar\",\n                \"payload\": \"RemoveProduct-\" + key\n              },\n              {\n                \"type\": \"postback\",\n                \"title\": \"Aumentar 1\",\n                \"payload\": \"IncreaseOneProduct-\" + key\n              },\n              {\n                \"type\": \"postback\",\n                \"title\": \"Disminuir 1\",\n                \"payload\": \"DecreaseOneProduct-\" + key\n              }\n            ]\n          };\n        }));\n      }\n    });\n\n    return Parse.Promise.when(promises).then(function(elements) {\n      return bot.sendTypingOff(recipientId, senderId).then(()=>{\n        return bot.sendGenericMessage(recipientId, senderId, elements).then(()=>{\n          sendEditCartOptions(recipientId, senderId)\n        });\n      });\n    });\n  });\n}\n\nfunction sendEditCartOptions(recipientId, senderId){\n  return bot.sendQuickReplyMessage(recipientId, senderId, \"Opciones del carrito:\", [\n    {\n      \"content_type\":\"text\",\n      \"title\":\"Finalizar pedido\",\n      \"payload\":\"CheckOrder\"\n    },\n    {\n      \"content_type\":\"text\",\n      \"title\":\"Seguir pidiendo\",\n      \"payload\":\"SendContinueOrder\"\n    }\n  ]);\n}\n\nfunction editCart(recipientId, senderId){\n  let cart = getData(recipientId, 'cart');\n\n  bot.sendTypingOn(recipientId, senderId);\n  return bot.sendTypingOff(recipientId, senderId).then(()=>{\n    return bot.sendGenericMessage(recipientId, senderId, [\n      {\n        \"title\": \"Opciones\",\n        \"image_url\": SERVER_URL+\"assets/thinking.jpg\",\n        \"buttons\": [\n          {\n            \"type\": \"web_url\",\n            \"url\": SERVER_URL+\"cart?\"+cart.id,\n            \"title\": \"Remover producto\",\n            \"webview_height_ratio\": \"full\",\n            \"messenger_extensions\": true\n          }\n        ]\n      }\n    ])\n  });\n\n}\n\nfunction clearCart(recipientId){\n  let cart = getData(recipientId, 'cart');\n\n  if(typeof cart != 'undefined'){\n    let items = cart.items;\n    cart.itemsPointers = [];\n\n    items.forEach(function(value, key){\n      items.delete(key);\n    });\n  }\n  return new Promise((resolve, reject) => {\n    resolve()\n  });\n}\n\nfunction clearAndSendCart(recipientId, senderId){\n  clearCart(recipientId).then(()=>{\n    sendCart(recipientId, senderId)\n  });\n}\n\nfunction checkOrder(recipientId, senderId){\n  let cart = getData(recipientId, 'cart');\n  let consumer = getData(recipientId, 'consumer');\n  let pointSale = getData(recipientId, 'pointSale');\n  let total = 0;\n\n  if(typeof cart != 'undefined'){\n    cart.items.forEach(function(value, key){\n      total += value.quantity * value.price;\n    });\n  }\n  else{\n    cart = createCart(recipientId)\n  }\n  if(typeof pointSale == 'undefined'){\n    bot.sendTextMessage(recipientId, senderId, \"No has registrado una dirección correcta, por favor registrala para visualizar el carrito\").then(()=>{\n      sendAddresses(recipientId, senderId)\n    });\n  }else{\n    if(pointSale.minOrderPrice && pointSale.minOrderPrice > total ){\n      sendMinOrderPriceRestriction(recipientId, senderId);\n    }\n    else if(typeof consumer.phone == 'undefined' || consumer.phone == ''){\n      setTelephone(recipientId, senderId)\n    }\n    else if(typeof consumer.email == 'undefined' || consumer.email == ''){\n      setEmail(recipientId, senderId)\n    }\n    else{\n      checkPayment(recipientId, senderId);\n    }\n  }\n}\n\nfunction checkAddress(recipientId, senderId){\n\n}\n\nfunction checkPayment(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    store.dispatch(Actions.loadPaymentMethods(recipientId, senderId)).then(() => {\n      let paymentMethods = getData(recipientId, 'paymentMethods');\n      let quick_replies = [];\n\n      for(let i in paymentMethods){\n        quick_replies.push({\n          \"content_type\": \"text\",\n          \"title\": paymentMethods[i].name.substring(0,20),\n          \"payload\": \"Checkout-\"+paymentMethods[i].objectId\n        });\n      }\n\n      return bot.sendTypingOff(recipientId, senderId).then(()=>{\n        return bot.sendQuickReplyMessage(recipientId, senderId, \"Como vas a pagar tu pedido? (Tu pedido se cobra cuando lo recibes)\", quick_replies)\n      });\n    });\n  });\n}\n\nfunction checkout(recipientId, senderId, id){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    store.dispatch(Actions.setPaymentMethod(recipientId, id)).then(() => {\n      let state = store.getState();\n      let paymentTypes = state['paymentTypes'];\n      let paymentMethod = getData(recipientId, 'paymentMethod');\n      let paymentFunction = paymentTypes[paymentMethod.method.objectId];\n\n      paymentFunction(recipientId, senderId);\n    });\n  });\n}\n\nfunction sendMinOrderPriceRestriction(recipientId, senderId){\n  let pointSale = getData(recipientId, 'pointSale');\n\n  return bot.sendTypingOff(recipientId, senderId).then(()=>{\n    return bot.sendTextMessage(recipientId, senderId, \"El valor minimo de una orden con domicilio es \"+pointSale.minOrderPrice+\", \\npor favor modifica tu pedido para cumplir este requisito\").then(()=>{\n      sendPurchaseOptions(recipientId, senderId);\n    })\n  });\n}\n\nfunction sendScheduleRestriction(recipientId, senderId, pointSaleSchedules){\n  let pointSale = getData(recipientId, 'pointSale');\n\n  let days = ['Domingo', 'Lunes', 'Martes', 'Miercoles', 'Jueves', 'Viernes', 'Sabado', 'Domingo'];\n  let text ='En este momento nuestros puntos de venta estan cerrados, \\npor favor solicita tu domicilio en los siguientes horarios:\\n\\n';\n\n  for(let pointSaleSchedule of pointSaleSchedules) {\n    let daysActive = pointSaleSchedule.get('daysActive');\n    let allDay = pointSaleSchedule.get('allDay');\n\n    for(let dayID in daysActive){\n      let ID = parseInt(dayID)\n      if((daysActive.length-1) != ID){\n        text += days[daysActive[dayID]-1]+\", \"\n      }\n      else{\n        text += \"y \"+days[daysActive[dayID]-1]+\" \"\n      }\n    }\n\n    if(allDay){\n      text += 'las 24 horas\\n'\n    }\n    else{\n      text += \"desde las \"+pointSaleSchedule.get('hourStart')+\" \";\n      text += \"hasta las \"+pointSaleSchedule.get('hourEnd');\n    }\n    text +=\"\\n\"\n  }\n\n  return bot.sendTypingOff(recipientId, senderId).then(()=>{\n    return bot.sendTextMessage(recipientId, senderId, text).then(()=>{\n      sendMenu(recipientId, senderId)\n    });\n  });\n}\n\nfunction sendCash(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    let paymentMethod = getData(recipientId, 'paymentMethod');\n    saveCart(recipientId);\n\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      return bot.sendTextMessage(recipientId, senderId, \"Se ha registrado el pago con \"+paymentMethod.name ).then(()=>{\n        orderConfirmation(recipientId, senderId);\n      })\n    });\n  });\n}\n\nfunction registerCreditCard(recipientId, senderId){\n  bot.sendTypingOn(recipientId, senderId);\n  authentication(recipientId, senderId).then( () => {\n    let consumer = getData(recipientId, 'consumer');\n\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      return bot.sendGenericMessage(recipientId, senderId, [{\n        \"title\": \"Registro de tarjeta de credito y finalización de tu pedido.\\n\\nEstas de acuerdo?\",\n        \"image_url\": SERVER_URL + \"assets/images/creditCards.jpg\",\n        \"subtitle\": \"Por razones de seguridad te redireccionaremos a una página web segura.\",\n        \"buttons\": [\n          {\n            \"type\": \"web_url\",\n            \"title\": \"Si\",\n            \"url\": SERVER_URL + \"creditCard?id=\" + consumer.objectId,\n            \"webview_height_ratio\": \"full\",\n            \"messenger_extensions\": true\n          },\n          {\n            \"type\": \"postback\",\n            \"title\": \"No\",\n            \"payload\": \"CancelRegisterCreditCard\"\n          }]\n      }]);\n    });\n  });\n}\n\nfunction registerCreditCardAndPay(recipientId, senderId){\n  bot.setDataBuffer(recipientId, 'creditCardPayload', 'SendCreditCards');\n\n  registerCreditCard(recipientId, senderId)\n}\n\nfunction cancelRegisterCreditCard(recipientId, senderId){\n  bot.sendTypingOn(recipientId, senderId).then(()=>{\n    let userBuffer = bot.buffer[recipientId];\n\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      return bot.sendTextMessage(recipientId, senderId, \"Si no ingresas los datos de tu tarjeta en nuestro sitio seguro, no podras comprar con tarjeta online\").then(()=>{\n        if (typeof userBuffer != 'undefined' && userBuffer.hasOwnProperty('creditCardPayload')) {\n          checkPayment(recipientId, senderId);\n        }\n        else{\n          sendAccount(recipientId, senderId);\n        }\n      });\n    });\n  });\n}\n\nfunction sendRegisteredCreditCards(recipientId, senderId){\n  bot.sendTypingOn(recipientId, senderId).then(()=>{\n    let user = getData(recipientId, 'user');\n    let consumer = getData(recipientId, 'consumer');\n\n    CreditCard.loadInStore(store, recipientId, user).then(() => {\n      let creditCards = getData(recipientId, 'creditCards');\n      if (creditCards.length == 0) {\n        return bot.sendTypingOff(recipientId, senderId).then(()=>{\n          return bot.sendQuickReplyMessage(recipientId, senderId, \"Aun no tienes tarjetas registradas, deseas registrar una tarjeta?\", [\n            {\n              \"content_type\":\"text\",\n              \"title\":\"Si\",\n              \"payload\":\"RegisterCreditCardAndPay\"\n            },\n            {\n              \"content_type\":\"text\",\n              \"title\":\"No\",\n              \"payload\":\"CheckPayment\"\n            }\n          ])\n        });\n      }\n      else {\n        let creditCards = getData(recipientId, 'creditCards');\n        let quick_replies = [];\n\n        quick_replies.push({\n          \"content_type\": \"text\",\n          \"title\": \"Agregar tarjeta\",\n          \"payload\": \"RegisterCreditCardAndPay\"\n        });\n\n        for(let card of creditCards){\n          if (quick_replies.length < bot.limit) {\n            quick_replies.push({\n              \"content_type\": \"text\",\n              \"title\": card.type+\" \"+card.lastFour,\n              \"payload\": \"PayWithCreditCard-\" + card.lastFour\n            });\n          }\n        }\n\n        return bot.sendTypingOff(recipientId, senderId).then(()=>{\n          return bot.sendQuickReplyMessage(recipientId, senderId, \"Con cual tarjeta quieres pagar?\", quick_replies)\n        });\n      }\n    });\n  });\n}\n\nfunction payWithCreditCard(recipientId, senderId, creditCardId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    orderConfirmation(recipientId, senderId)\n  });\n}\n\nfunction orderConfirmation(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    saveOrder(recipientId, senderId);\n    getOrderState(0).then(state=> {\n      return bot.sendTypingOff(recipientId, senderId).then(() => {\n        return bot.sendTextMessage(recipientId, senderId, state.messagePush + \"\\n\\nEn un momento te estaremos dando información en tiempo real sobre tu pedido\")\n      });\n    });\n  });\n}\n\nfunction sendorderMapState(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      return bot.sendTextMessage(recipientId, senderId, \"Buenas noticias, Tu pedido ha sido Enviado. \\n\\nHaz click en el mapa para vel tu pedido\").then(()=>{\n        sendserviceRating(recipientId, senderId);\n      })\n    });\n  });\n}\n\nfunction sendOrderState(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    let orderState = getData(recipientId, 'orderState');\n    let pointSale = getData(recipientId, 'pointSale');\n\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      switch(orderState.order){\n        case 1:\n          return bot.sendTextMessage(recipientId, senderId, \"Tu pedido ha sido Aceptado. \\n\\nLo estan preparando en nuestra sede y te lo enviaremos en aproximadamente \"+pointSale.deliveryTime+\" minutos\")\n        case 5:\n          return bot.sendTextMessage(recipientId, senderId, orderState.messagePush).then(()=>{\n            sendserviceRating(recipientId, senderId);\n          });\n        case 6:\n          return new Promise((resolve, reject) => {\n            resolve()\n          });\n        case 8:\n          return bot.sendTextMessage(recipientId, senderId, orderState.messagePush).then(()=>{\n            sendOrders(recipientId, senderId);\n          });\n        default:\n          return bot.sendTypingOff(recipientId, senderId).then(()=>{\n            return bot.sendTextMessage(recipientId, senderId, orderState.messagePush)\n          });\n      }\n    });\n  });\n}\n\nfunction sendserviceRating(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      return bot.sendQuickReplyMessage(recipientId, senderId, \"Califica tu experiencia para ayudarnos a mejorar. \\n\\nDe 1 a 5 cuantas extrellas merece nuestro servicio?\", [\n        {\n          \"content_type\":\"text\",\n          \"title\":\"5 (Excelente)\",\n          \"payload\":\"SetScore-5\"\n        },\n        {\n          \"content_type\":\"text\",\n          \"title\":\"4 (Bien)\",\n          \"payload\":\"SetScore-4\"\n        },\n        {\n          \"content_type\":\"text\",\n          \"title\":\"3 (Regular)\",\n          \"payload\":\"SetScore-3\"\n        },\n        {\n          \"content_type\":\"text\",\n          \"title\":\"2 (Mal)\",\n          \"payload\":\"SetScore-2\"\n        },\n        {\n          \"content_type\":\"text\",\n          \"title\":\"2 (Muy mal)\",\n          \"payload\":\"SetScore-1\"\n        },\n      ]);\n    });\n  });\n}\n\nfunction setScore(recipientId, senderId, score){\n  let order = getData(recipientId, 'order');\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    Parse.Cloud.run('rateOrder', { orderId: order.objectId, score: Number(score), comment: ''}).then(\n      function(result){\n        return bot.sendTypingOff(recipientId, senderId).then(()=>{\n          thank(recipientId, senderId)\n        });\n      },\n      function(error) {\n        console.log('error');\n        console.log(error);\n      });\n  });\n}\n\nfunction thank(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      return bot.sendTextMessage(recipientId, senderId, \"Gracias, esperamos tener el gusto de atenderle nuevamente\")\n    });\n  });\n}\n\nfunction searchProducts(recipientId, senderId, query, index){\n  let customer = getData(recipientId, 'customer');\n\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    Parse.Cloud.run('search', { businessId: customer.businessId, q: query }).then(\n      function(result){\n\n        if(result.length == 0){\n          renderSearchEmpty(recipientId, senderId);\n        }\n        else if(result.length == 1 && result[0].type == 'Category'){\n          sendProducts(recipientId, senderId, result[0].id, 0)\n        }\n        else{\n          if(index == undefined)\n            index = 0;\n          else if( typeof index == 'string')\n            index = parseInt(index);\n\n          if(index == 0){\n            renderSearchInitial(recipientId, senderId)\n          }\n\n          splitSearchResult(recipientId, result, index).then(elements => {\n            let idx = Object.keys(result).length;\n            let buttons = [];\n            let catIni = (index+1)*bot.limit;\n            let catFin =  (idx > catIni+bot.limit) ? catIni+bot.limit : idx;\n\n            if(idx > (index+1)*bot.limit){\n              buttons.push({\n                type: \"postback\",\n                title: \"Productos \"+(catIni+1)+\"-\"+catFin,\n                payload: \"Search-\"+(index+1),\n              });\n\n              elements.push({\n                title: \"Ver más productos \",\n                subtitle: \"Productos disponibles\",\n                buttons: buttons\n              });\n            }\n\n            return bot.sendTypingOff(recipientId, senderId).then(()=>{\n              return bot.sendGenericMessage(recipientId, senderId, elements)\n            });\n          });\n        }\n      },\n      function(error) {\n        console.log('error');\n        console.log(error);\n      }\n    );\n  });\n}\n\nfunction renderSearchInitial(recipientId, senderId){\n  return bot.sendTypingOff(recipientId, senderId).then(()=>{\n    return bot.sendTextMessage(recipientId, senderId, \"Se han encontrado los siguientes productos:\")\n  });\n}\n\nfunction renderSearchEmpty(recipientId, senderId){\n  return bot.sendTypingOff(recipientId, senderId).then(()=>{\n    return bot.sendTextMessage(recipientId, senderId, \"No se han encontrado productos que coincidan\")\n  })\n}\n\nfunction splitSearchResult(recipientId, products, index){\n  let customer = getData(recipientId, 'customer');\n  let image_url;\n  let idx = 0;\n  let elements = [];\n  let promises = [];\n\n  products.forEach(function(item){\n    if(item && item.name && item.type == 'Product'){\n      if(idx >= (index)*bot.limit && idx < (index+1)*bot.limit){\n        promises.push(new Parse.Query(Product).get(item.id).then(product => {\n          return extractParseAttributes(product);\n        }));\n        idx = idx+1;\n      }\n    }\n  });\n\n  return Parse.Promise.when(promises).then(function(productObjects) {\n    productObjects.forEach(function(product) {\n      let image = product.image;\n      image_url = (typeof image != 'undefined') ? image.url : customer.image.url;\n      elements.push({\n        title: product.name +\": $\"+ product.priceDefault,\n        subtitle: product.description,\n        image_url: image_url,\n        buttons: [{\n          type: \"postback\",\n          title: 'Agregar',\n          payload: \"AddProduct-\"+product.objectId,\n        },\n          {\n            type: \"postback\",\n            title: 'Ver descripción',\n            payload: \"SendProductDescription-\"+product.objectId,\n          }]\n      });\n    })\n    return elements;\n  });\n\n  //    subtitle: item.get('description'),\n}\n\nfunction sendHelp(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      bot.clearListener(recipientId);\n      return bot.sendTextMessage(recipientId, senderId, \"InOut Bot.\\n\\nTe permite visualizar las opciones de productos, agregarlos al carrito y realizar tu compra por medio del chat de facebook.\\n\\nFuncionalidades disponibles: \\n\\n'Hola', para iniciar la conversación\\n'Pedir Domicilio', si quieres realizar un domicilio\\n'Carrito', para ver el estado actual de tu carrito\").then(()=>{\n        sendContactUs(recipientId, senderId);\n      });\n    });\n  });\n}\n\nfunction sendContactUs(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      return bot.sendTextMessage(recipientId, senderId, \" Para mayor información puedes contactarnos en:\\n\\n Web: http://www.inoutdelivery.com/\\n\\n Email: soporte@inoutdelivery.com\")\n    });\n  });\n}\n\nfunction sendOrders(recipientId, senderId){\n  let customer = getData(recipientId, 'customer');\n\n  bot.sendTypingOn(recipientId, senderId).then(()=>{\n    authentication(recipientId, senderId).then( () =>{\n      bot.clearListener(recipientId);\n      let consumer = getData(recipientId, 'consumer');\n      Parse.Cloud.run('ordersBot', { businessId: customer.businessId, consumerId: consumer.objectId}).then( orders => {\n        store.dispatch(Actions.setOrders(recipientId, orders)).then(() => {\n          renderOrders(recipientId, senderId);\n        });\n      }).fail(error => {\n        console.log('error');\n        console.log(error);\n      });\n    });\n  });\n}\n\nfunction renderOrders(recipientId, senderId){\n  let customer = getData(recipientId, 'customer');\n  let orders = getData(recipientId, 'orders');\n  let elements = [];\n\n  elements.push({\n    \"title\": \"Nueva orden\",\n    \"subtitle\": \"Puedes realizar una orden\",\n    \"image_url\": SERVER_URL+\"assets/images/newOrden.jpg\",\n    \"buttons\": [\n      {\n        \"type\": \"postback\",\n        \"title\": \"Nueva orden\",\n        \"payload\": \"NewOrder\"\n      }\n    ]\n  });\n\n  for(let order of orders.ongoing) {\n    let pointSale = order.pointSale;\n    if (elements.length < bot.limit){\n      let datetime = DateTime.dateString(order.createdAt);\n      let image_url = customer.image.url;\n      let title = (order.orderNumber)? 'Orden: '+order.orderNumber :  'Orden: '+dateFormat(datetime, \"h:MM:ss TT dd/mm/yyyy\")\n\n      elements.push({\n        \"title\": title,\n        \"subtitle\": 'Estado: '+order.state.name+', Valor: $'+(order.total+pointSale.deliveryCost),\n        \"image_url\": image_url,\n        \"buttons\": [\n          {\n            \"type\": \"postback\",\n            \"title\": \"Ver orden\",\n            \"payload\": \"SendOrder-\"+order.objectId\n          },\n          {\n            \"type\": \"postback\",\n            \"title\": \"Cancelar orden\",\n            \"payload\": \"CancelOrder-\"+order.objectId\n          }\n        ]\n      });\n    }\n  }\n\n  return bot.sendTypingOff(recipientId, senderId).then(()=>{\n    return bot.sendGenericMessage(recipientId, senderId, elements)\n  });\n}\n\nfunction sendOrder(recipientId, senderId, id){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    authentication(recipientId, senderId).then( () =>{\n      let orders = getData(recipientId, 'orders');\n      let customer = getData(recipientId, 'customer');\n      let customer_image_url = customer.image.url;\n      let currentOrder;\n      let elements = [];\n      let element;\n      let image_url;\n      let product;\n\n      for(let order of orders.ongoing){\n        if(order.objectId == id){\n          currentOrder = order;\n        }\n      }\n\n      for(let item of currentOrder.items){\n        product = item.product;\n        image_url = customer_image_url;\n\n        if(product.image){\n          image_url = product.image.url;\n        }\n\n        element = {};\n        element['title'] = product.name;\n        element['quantity'] = item.amount;\n        element['price'] = item.price;\n        element['currency'] = \"COP\";\n        element['image_url'] = image_url;\n\n        elements.push(element);\n      }\n\n      renderOrder(recipientId, senderId, currentOrder, elements)\n    });\n  });\n}\n\nfunction renderOrder(recipientId, senderId, order, elements){\n  let user = getData(recipientId, 'user');\n  let consumer = getData(recipientId, 'consumer');\n  let address = order.consumerAddress;\n  let pointSale = order.pointSale;\n  let payment_method = order.paymentMethod;\n  let addressData = undefined;\n\n  if(typeof payment_method == 'undefined'){\n    payment_method = {name: 'Sin definir'}\n  }\n\n  if(typeof address != 'undefined'){\n    addressData = {\n      street_1: address.address ? address.address : 'Dirección no definida',\n      street_2: address.description ? address.description : 'Sin complemento',\n      city: address.city ? address.city : 'No definida',\n      postal_code: address.postalCode ? address.postalCode : 'No definido',\n      state: address.state ? address.state : 'No definido',\n      country: address.countryCode ? address.countryCode : 'No definido'\n    }\n  }\n\n  return bot.sendTypingOff(recipientId, senderId).then(()=>{\n    return bot.sendReceiptMessage(recipientId, senderId, {\n        template_type: \"receipt\",\n        recipient_name: user.first_name+\" \"+user.last_name,\n        order_number: order.objectId,\n        currency: \"COP\",\n        payment_method: payment_method.name,\n        timestamp: Math.trunc(Date.now()/1000).toString(),\n        elements: elements,\n        address: addressData,\n        summary: {\n          subtotal: order.total,\n          shipping_cost: pointSale.deliveryCost,\n          total_cost: order.total+pointSale.deliveryCost\n        }\n      },\n      [\n        {\n          \"content_type\":\"text\",\n          \"title\":\"Nueva orden\",\n          \"payload\":\"NewOrder\"\n        },\n        {\n          \"content_type\":\"text\",\n          \"title\":\"Ver órdenes\",\n          \"payload\":\"SendOrders\"\n        },\n        {\n          \"content_type\":\"text\",\n          \"title\":\"Cancelar orden\",\n          \"payload\":\"CancelOrder-\"+order.objectId\n        }\n      ]);\n  });\n}\n\nfunction newOrder(recipientId, senderId){\n  clearCart(recipientId).then(()=>{\n    sendAddressesWithTitle(recipientId, senderId);\n  });\n}\n\nfunction cancelOrder(recipientId, senderId, id){\n  Parse.Cloud.run('changeStatusOrder', { status: \"canceledByUser\", orderId: id}).then( () => {\n\n  }).fail(error => {\n    console.log('error');\n    console.log(error);\n  });\n}\n\nfunction sendAccount(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    authentication(recipientId, senderId).then( ()=> {\n      bot.clearListener(recipientId);\n      renderAccount(recipientId, senderId)\n    });\n  });\n}\n\nfunction renderAccount(recipientId, senderId){\n  let user = getData(recipientId, 'user');\n  let consumer = getData(recipientId, 'consumer');\n  let elements = [{\n    \"title\": 'Ver direcciones',\n    \"subtitle\": 'Editar y eliminar direcciones',\n    \"image_url\": SERVER_URL+\"assets/images/addresses.jpg\",\n    \"buttons\": [\n      {\n        \"type\": \"postback\",\n        \"title\": 'Ver direcciones',\n        \"payload\": \"SendAddresses\"\n      }\n    ]\n  },{\n    \"title\": 'Ver tarjetas de credito',\n    \"subtitle\": 'Editar y eliminar tarjetas de credito',\n    \"image_url\": SERVER_URL+\"assets/images/creditCards.jpg\",\n    \"buttons\": [\n      {\n        \"type\": \"postback\",\n        \"title\": 'Ver tarjetas',\n        \"payload\": \"SendCreditCards\"\n      }\n    ]\n  }];\n\n  return bot.sendTypingOff(recipientId, senderId).then(()=>{\n    return bot.sendGenericMessage(recipientId, senderId, elements)\n  });\n}\n\nfunction sendYouAreWelcome(recipientId, senderId){\n  return bot.sendTypingOn(recipientId, senderId).then(()=>{\n    return bot.sendTypingOff(recipientId, senderId).then(()=>{\n      return bot.sendTextMessage(recipientId, senderId, \"De nada, gracias por usar nuestros servicios\")\n    });\n  });\n}\n\nfunction addCreditCard(recipientId, senderId, token, data){\n  let customer = getData(recipientId, 'customer');\n  let expiration = data['expiry'].replace(/\\s+/g,\"\").split('/');\n\n  return rp({\n    uri: PARSE_SERVER_URL+'/functions/addCreditCard',\n    headers: {\n      'Content-Type': 'text/plain;charset=UTF-8',\n      'X-Parse-Application-Id': PARSE_APP_ID,\n      'X-Parse-Session-Token': token\n    },\n    method: 'POST',\n    json: {\n      \"businessId\": customer.businessId,\n      \"number\": data['number'].replace(/\\s+/g,\"\"),\n      \"holderName\": data['holderName'],\n      \"verificationNumber\": data['cvc'],\n      \"expirationMonth\": expiration[0],\n      \"expirationYear\": expiration[1]\n    }\n  }).then( body => {\n    rp({\n      uri: SERVER_URL+'creditCardRegistered',\n      method: 'POST',\n      json: { \"recipientId\": recipientId, \"senderId\": senderId}\n    })\n  }).catch(error =>{\n    console.log('error');\n    console.log(error);\n    let response = error.response;\n    //console.log(JSON.stringify(error, null, 1));\n    console.log(JSON.stringify(response.body, null, 1))\n\n  });\n}\n\nfunction getOrderState(orderStateNumber){\n  return new Parse.Query(OrderState).equalTo('order', orderStateNumber).find().then( state => {\n      return extractParseAttributes(state[0]);\n    },\n    (object, error) => {\n      console.log(error);\n    });\n}\n\nexport function app(server) {\n  /*\n  let router = server.loopback.Router();\n  server.use(router);\n  server.get('/', (req, res) =>{\n    res.status(200).send('Speedy Bot!');\n  });\n  */\n  server.get('/authorize', bot.authorize);\n  server.get('/webhook', bot.verifyToken);\n  server.post('/webhook', bot.router);\n\n};\n\ncreateLocalStore(reducer);\n\nmodule.exports = app;\n"]}
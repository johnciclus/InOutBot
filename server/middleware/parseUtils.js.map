{"version":3,"file":"parseUtils.js","sourceRoot":"","sources":["parseUtils.ts"],"names":[],"mappings":"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","sourcesContent":["import Parse from './parse'\nimport * as objectAssign from 'object-assign'\n\nexport function extractParseAttributes (object) {\n  if (!(object instanceof Parse.Object)) {\n    return object\n  }\n  const attributes = object.toJSON()\n  let result = {}\n  objectAssign(result, {id: object.objectId}, attributes)\n  Object.keys(attributes).forEach(key => {\n    if (result[key] && result[key].length && result[key] instanceof Array) {\n      result[key] = result[key].map(o => extractParseAttributes(o))\n    }\n    if (result[key] instanceof Parse.Object && key != 'rawParseObject') {\n      let parseObject = result[key]\n      result[key] = extractParseAttributes(result[key])\n      result[key].rawParseObject = parseObject\n    }\n    if (result[key] instanceof Parse.GeoPoint\n      || (result[key] && result[key].__type == \"GeoPoint\")) {\n      result[key] = {\n        lat: result[key].latitude,\n        lng: result[key].longitude\n      }\n    }\n  })\n  result['rawParseObject'] = object\n  return result\n}\n\nexport function unsetRawParseObjects (object) {\n  if (!(object instanceof Parse.Object)) {\n    return object\n  }\n  object.unset('rawParseObject')\n  Object.keys(object.attributes).forEach(key => {\n    if (object.get(key) instanceof Array) {\n      const items = object.get(key)\n      object.set(key, [])\n      items.forEach(o => {\n        unsetRawParseObjects(o)\n        object.add(key, o)\n      })\n    }\n    if (object.get(key) && object.get(key).rawParseObject) {\n      object.set(key, object.get(key).rawParseObject)\n      unsetRawParseObjects(object.get(key))\n    }\n  })\n}\n\n\n"]}
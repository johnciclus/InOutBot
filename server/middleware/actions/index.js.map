{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["import Parse from '../parse'\nimport * as types from '../constants/actionTypes'\nimport GetProductsParams from '../models/GetProductsParams'\nimport {Customer, CustomerPointSale, User, Consumer, ConsumerAddress, Category, Product, Cart, Order, OrderItem, OrderState, Modifier, ModifierItem, OrderItemModifier, PaymentMethod, PaymentMethodLanguage, CreditCard} from '../models/ParseModels'\n\nimport { extractParseAttributes } from '../parseUtils';\n\n/**\n * Load Consumer of given user\n */loadConsumerCreditCards\nexport function loadCustomer(recipientId, businessId) {\n  if (businessId == null) return;\n  return dispatch => {\n    return new Parse.Query(Customer).contains('businessId', businessId).limit(1).first().then(\n      customer => {\n        dispatch({type: types.CUSTOMER_LOADED, data: {recipientId, customer}})\n      }\n    ).fail(e => {\n      dispatch({type: types.CUSTOMER_NOT_FOUND, data: {recipientId, businessId}})\n    })\n  };\n}\n\nexport function getCustomerByFanpage(senderId){\n  return new Parse.Query(Customer).equalTo('fanpageId', senderId).first().then(customer =>{\n    return extractParseAttributes(customer);\n  }).fail(e => {\n    console.log('error: '+e)\n  });\n}\n\nexport function setCustomer(recipientId, customer){\n  return dispatch => {\n    return Parse.Promise.as().then(() => {\n      dispatch({ type: types.SET_CUSTOMER, data: {recipientId, customer}})\n    })\n  }\n}\n\n/**\n * Load Consumer of given user\n */\nexport function loadUser(recipientId) {\n  return dispatch => {\n    return new Parse.Query(Consumer).equalTo('recipientId', parseInt(recipientId)).first().then(consumer => {\n      if (consumer) {\n        return new Parse.Query(User).get(consumer.get('user').id).then(user => {\n          dispatch({type: types.USER_LOADED, data: {recipientId, user}})\n        }).fail(e => {\n          dispatch({type: types.USER_NOT_FOUND , data: {}})\n        })\n      }\n    }).fail(e => {\n      dispatch({type: types.CONSUMER_NOT_FOUND, data: {}})\n    })\n\n    /*\n     return new Parse.Query(User).equalTo('facebookId', recipientId).first().then(user => {\n     if (user) {\n     dispatch({type: types.USER_LOADED, data: {recipientId, user}})\n     }\n     })\n     * */\n  }\n}\n\n/**\n * Load Consumer of given user\n */\nexport function loadConsumer(recipientId, user) {\n  if (user == null) return;\n  return dispatch => {\n    return new Parse.Query(Consumer).equalTo('user', user).first().then(\n      consumer => {\n        if (consumer) {\n          dispatch({type: types.CONSUMER_LOADED, data: {recipientId, consumer}})\n\n        }\n        else {\n          dispatch({type: types.CONSUMER_NOT_FOUND, data: {user}})\n        }\n      }).fail(e => {\n      dispatch({type: types.CONSUMER_NOT_FOUND, data: {user}})\n    })\n  }\n}\n\n/**\n * Load Consumer Addresses and dispatch action with the results.\n */\nexport function loadConsumerAddresses(recipientId, consumer) {\n  if (consumer == null) return;\n  return dispatch => {\n    return new Parse.Query(ConsumerAddress).equalTo('consumer', consumer).find().then(\n      addresses => {\n        dispatch({type: types.CONSUMER_ADDRESSES_LOADED, data: {recipientId, addresses}})\n      }).fail(error => {\n      console.log('Error '+error);\n      //TODO dispatch action with error\n    })\n  }\n}\n\n/**\n * Load Consumer Addresses and dispatch action with the results.\n */\nexport function loadConsumerCreditCards(recipientId, user) {\n  if (user == null) return;\n  return dispatch => {\n    return new Parse.Query(CreditCard).equalTo('consumer', user).find().then(\n      creditCards => {\n        dispatch({type: types.CONSUMER_CREDITCARDS_LOADED, data: {recipientId, creditCards}})\n      }).fail(error => {\n      console.log('Error '+error);\n      //TODO dispatch action with error\n    })\n  }\n}\n\nexport function loadOrders(recipientId, orders){\n  if (orders == undefined) return\n  return dispatch => {\n\n  }\n}\n\n/**\n * SET_CURRENT_ADDRESS action\n */\nexport function setAddress(recipientId, id) {\n  return dispatch => {\n    return new Parse.Query(ConsumerAddress).get(id).then(\n      address => {\n        dispatch({ type: types.SET_CURRENT_ADDRESS, data: {recipientId, address}})\n      }).fail(error => {\n      console.log('Error '+error);\n      //TODO dispatch action with error\n    });\n  }\n}\n\n/**\n * Load Payment Methods.\n */\nexport function loadPaymentMethods(recipientId, senderId) {\n  return getCustomerByFanpage(senderId).then(customer =>{\n    return dispatch => {\n      return new Parse.Cloud.run('paymentMethods',{\n        languageCode: 'es',\n        businessId:  customer.businessId\n      }).then((paymentMethods) => {\n        dispatch({ type: types.PAYMENT_METHODS_LOADED, data: {recipientId, paymentMethods}})\n      })\n    }\n  });\n}\n\nexport function setPaymentMethod(recipientId, id){\n  return dispatch => {\n    return new Parse.Query(PaymentMethodLanguage).get(id).then(\n      paymentMethod => {\n        dispatch({ type: types.SET_PAYMENT_METHOD, data: {recipientId, paymentMethod}})\n      }).fail(error => {\n      console.log('Error '+error);\n      //TODO dispatch action with error\n    });\n  }\n}\n\nexport function getConsumerAndAddresses(user){\n  return (dispatch, getState) => {\n    return dispatch(recipientId, loadConsumer(user)).then(() => {\n      return dispatch(loadConsumerAddresses(getState().consumer.rawParseObject))\n    })\n  }\n}\n\n/**\n * Address Saved\n */\nexport function addressSaved(address) {\n  return {\n    type: types.ADDRESS_SAVED,\n    data: address\n  }\n}\n\n/**\n * HIDE_ADDRESS_FORM action\n */\nexport function hideAddressForm() {\n  return { type: types.HIDE_ADDRESS_FORM }\n}\n\n/**\n * Address Saved Error\n */\nexport function addressSaveError() { return { type: types.ADDRESS_SAVE_ERROR } }\n\n/**\n * Save ConsumerAddress on Parse.\n */\nfunction saveConsumerAddress(consumerAddress, dispatch, pendingOrder, cart) {\n  const ConsumerAddress = Parse.Object.extend('ConsumerAddress')\n  const parseConsumerAddress = new ConsumerAddress()\n  if (!consumerAddress.consumer) { return }\n  if (consumerAddress.objectId) {\n    parseConsumerAddress.objectId = consumerAddress.objectId\n  }\n  const consumer = consumerAddress.consumer.rawParseObject\n  const location = consumerAddress.location\n  const parseGeoPoint = new Parse.GeoPoint(location.lat, location.lng)\n  parseConsumerAddress.set('location', parseGeoPoint)\n  parseConsumerAddress.set('consumer', consumer)\n  parseConsumerAddress.set('address', consumerAddress.address)\n  parseConsumerAddress.set('name', consumerAddress.name)\n  parseConsumerAddress.set('description', consumerAddress.description)\n  parseConsumerAddress.save().then(consumerAddress => {\n    dispatch(addressSaved(consumerAddress))\n    dispatch(loadConsumerAddresses(consumer, dispatch))\n    dispatch(hideAddressForm())\n  }).fail(e => {\n    dispatch(addressSaveError())\n  })\n}\n\nexport function loadUserCreditCards(recipientId, user){\n  if(user == null) return\n  return dispatch => {\n    return new Parse.Query(CreditCard).equalTo('user', user).find().then(\n      creditCards => {\n        dispatch({type: types.USER_CREDITCARDS_LOADED, data: {recipientId, creditCards}})\n      }).fail(error => {\n      console.log('Error '+error);\n      //TODO dispatch action with error\n    })\n  }\n}\n\nexport function setCustomerPointSale(recipientId, id){\n  return dispatch => {\n    return new Parse.Query(CustomerPointSale).get(id).then(\n      pointSale => {\n        dispatch({ type: types.SET_CUSTOMER_POINT_SALE, data: {recipientId, pointSale}})\n      }).fail(error => {\n      console.log('Error '+error);\n      //TODO dispatch action with error\n    });\n  }\n}\n\nexport function setOrder(recipientId, order){\n  return dispatch => {\n    return Parse.Promise.as().then(() => {\n      dispatch({type: types.SET_ORDER, data: {recipientId, order}})\n    })\n  }\n}\n\nexport function setUser(recipientId, user){\n  return dispatch => {\n    return Parse.Promise.as().then(() => {\n      dispatch({ type: types.SET_USER, data: {recipientId, user}})\n    })\n  }\n}\n\nexport function setConsumer(recipientId, consumer){\n  return dispatch => {\n    return Parse.Promise.as().then(() => {\n      dispatch({ type: types.SET_CONSUMER, data: {recipientId, consumer}})\n    })\n  }\n}\n\n\n\nexport function setOrderState(recipientId, orderState){\n  return dispatch => {\n    return Parse.Promise.as().then(() => {\n      dispatch({ type: types.SET_ORDER_STATE, data: {recipientId, orderState}})\n    })\n  }\n}\n\nexport function setOrders(recipientId, orders){\n  return dispatch => {\n    return Parse.Promise.as().then(() => {\n      dispatch({ type: types.SET_ORDERS, data: {recipientId, orders}})\n    })\n  }\n}\n\n/**\n * Load Orders from Parse calling 'orders' cloud function.\n * It will dispatch CONSUMER_ORDERS_LOADED with ongoing and delivered orders.\n */\nexport function loadConsumerOrders(recipientId, consumer) {\n  if (consumer == null) return\n  return dispatch => {\n    /*\n     return Parse.Cloud.run('orders').then((orders) => {\n     console.log(orders);\n     })\n     */\n\n    return new Parse.Query(Order).equalTo('consumer', consumer).find().then(\n      orders => {\n        console.log(orders);\n        dispatch({type: types.CONSUMER_ORDERS_LOADED, data: {recipientId, orders}})\n      }).fail(error => {\n      console.log('Error '+error);\n    })\n\n  }\n\n  /*return dispatch => {\n   Parse.Cloud.run('orders', { businessId: BUSINESS[senderId].BUSINESS_ID }).then(orders => {\n   dispatch({\n   type: types.CONSUMER_ORDERS_LOADED,\n   data: orders\n   })\n\n   const ordersObjectId = orders.ongoing.map(o => o.id)\n   const ordersQuery = new Parse.Query(Order)\n   ordersQuery.containedIn('objectId', ordersObjectId)\n   ordersQuery.find().then(function (o) { console.log(o) })\n   const subscription = ordersQuery.subscribe()\n   subscription.on('open', () => { console.log('Opened') })\n   subscription.on('create', () => { console.log('created', arguments) })\n   subscription.on('enter', () => { console.log('entered', arguments) })\n   subscription.on('leave', () => { console.log('left', arguments) })\n   subscription.on('update', (orders) => {\n   console.log('Orders Updated', orders)\n   dispatch({\n   type: types.CONSUMER_ORDERS_LOADED,\n   data: orders\n   })\n   })\n   }).fail(e => {\n   })\n   }*/\n}\n\n\n/**\n * Load products from Parse.\n */\nexport function loadProducts(senderId, lat, lng, category, pointSale ) {\n  return getCustomerByFanpage(senderId).then(customer => {\n    return (dispatch, getState) => {\n      let params = new GetProductsParams(customer.businessId)\n      if (lat && lng) {\n        params.lat = lat;\n        params.lng = lng;\n      }\n      const currentCategory = getState().routing.locationBeforeTransitions.query.category\n      if (category) {\n        params.category = category\n      } else if (currentCategory) {\n        params.category = currentCategory\n      }\n      if (pointSale) {\n        params.pointSale = pointSale\n      }\n      dispatch({type: types.LOADING_PRODUCTS})\n      Parse.Cloud.run('getProducts', params).then((results) => {\n        dispatch({\n          type: types.PRODUCTS_LOADED,\n          data: results\n        })\n      }).fail((e) => {\n        dispatch({type: types.PRODUCTS_LOAD_ERROR})\n        try {\n          if (e.message.code === 1001) {\n            dispatch({type: types.OUT_OF_COVERAGE, data: {lat, lng}})\n            dispatch(loadPointSales())\n          }\n        } catch (e) {\n        }\n      })\n    }\n  });\n}\n\n/**\n * Filter products by given category\n */\nexport function filterProductsByCategory(category) {\n  return {\n    type: types.FILTER_PRODUCTS_BY_CATEGORY,\n    data: category\n  }\n}\n\n/**\n * Add Product to cart action\n */\nexport function addProductToCart(cartItem) {\n  return (dispatch, getState) => {\n    const { cart } = getState()\n    if (cart.consumerAddress.location.isValid()) {\n      dispatch({\n        type: types.ADD_TO_CART,\n        data: cartItem\n      })\n    } else {\n      dispatch(showAddressSearchModal())\n    }\n  }\n}\n\n/**\n * Empty cart action\n */\nexport function emptyCart() {\n  return { type: types.EMPTY_CART }\n}\n\n/**\n * Load User's Facebook data.\n */\nfunction loadFacebookUserData(accessToken, dispatch) {\n  FB.api('/me', {\n    fields: 'email, first_name, last_name',\n    access_token: accessToken\n  }, function (res) {\n    if (!res.error) {\n      dispatch(facebookDataLoaded(res))\n    } else {\n      //TODO dispatch error event\n    }\n  })\n}\n\n/**\n * Facebook Data Loaded\n */\nexport function facebookDataLoaded(data) {\n  return {type: types.FACEBOOK_USER_DATA_LOADED, data}\n}\n\n\n\n\n\n/**\n * Create Consumer\n */\nexport function createConsumer(consumerData, mainDispatch) {\n  return dispatch => {\n    const consumer = new Consumer()\n    consumer.save(consumerData).then( consumer => {\n      dispatch({type: types.CONSUMER_CREATED, data: {\n        user: consumerData.user, consumer\n      }})\n      dispatch({type: types.CONSUMER_LOADED, data: {consumer}})\n      mainDispatch(push('/'))\n    }).fail(e => {\n      dispatch({type: types.CONSUMER_NOT_FOUND, data: {user: consumerData.user}})\n    })\n  }\n}\n\n/**\n * Update Consumer.\n * Update consumer's user in success callback.\n * It only dispatches CONSUMER_UPDATED if Consumer and ParseUser were\n * saved successfully.\n */\nexport function updateConsumer(senderId, consumerData) {\n  return getCustomerByFanpage(senderId).then(customer => {\n    return dispatch => {\n      dispatch({type: types.UPDATE_CONSUMER, data: consumerData})\n      const consumer = new Consumer()\n      consumer.objectId = consumerData.objectId\n      consumer.save(consumerData).then(consumer => {\n        let username = consumer.get('email') + customer.businessId;\n        consumer.get('user').save({username}).then(u => {\n          dispatch({type: types.CONSUMER_UPDATED, data: {consumer}})\n          dispatch({type: types.HIDE_PROFILE})\n        }).fail(e => {\n          dispatch({type: types.CONSUMER_UPDATE_ERROR, data: {consumer}})\n        })\n      }).fail(e => {\n        dispatch({type: types.CONSUMER_UPDATE_ERROR, data: {consumer}})\n      })\n    }\n  });\n}\n\n/**\n * Facebook Login Success\n */\nexport function facebookLogin (mainDispatch) {\n  return dispatch => {\n    Parse.FacebookUtils.logIn(null, {\n      success: function(user) {\n        if (!user.existed()) {\n          dispatch({type: types.FACEBOOK_REGISTER_SUCCESS})\n        } else {\n          dispatch({type: types.FACEBOOK_LOGIN_SUCCESS, data: user})\n        }\n        mainDispatch(push('/'))\n        dispatch(loadConsumer(user, mainDispatch))\n      },\n      error: function(user, error) {\n        alert(\"Login cancelado.\")\n      }\n    })\n  }\n}\n\n/**\n * Logout\n */\nexport function logout(mainDispatch) {\n  return dispatch =>{\n\n    if(Parse.User.current()) {\n      Parse.User.logOut()\n    }\n\n    mainDispatch(push('/'))\n    window.location = \"/\"\n    dispatch({type: types.LOGOUT})\n  }\n}\n\n/**\n * Email Login Action\n */\nexport function emailLogin(senderId, userData, mainDispatch) {\n  return getCustomerByFanpage(senderId).then(customer => {\n    mainDispatch({type: types.EMAIL_LOGIN})\n    return dispatch => {\n      Parse.User.logIn(userData.email + customer.businessId, userData.password).then(user => {\n        dispatch({\n          type: types.EMAIL_LOGIN_SUCCESS,\n          data: user\n        })\n        mainDispatch(push('/'))\n        dispatch(loadConsumer(user, mainDispatch))\n      }).fail(e => {\n        dispatch({\n          type: types.EMAIL_LOGIN_ERROR,\n          data: e\n        })\n      })\n    }\n  });\n}\n\n/**\n * Email Login Action\n */\nexport function emailRegister(senderId, userData, mainDispatch) {\n  return getCustomerByFanpage(senderId).then(customer => {\n    mainDispatch({type: types.EMAIL_REGISTER})\n    return dispatch => {\n      Parse.User.signUp(userData.email + customer.businessId, userData.password).then(user => {\n        dispatch({\n          type: types.EMAIL_REGISTER_SUCCESS,\n          data: {user, userData}\n        })\n        delete userData.password\n        delete userData.passwordConfirmation\n        userData.user = user\n        dispatch(createConsumer(userData, mainDispatch))\n      }).fail(e => {\n        dispatch({\n          type: types.EMAIL_REGISTER_ERROR,\n          data: e\n        })\n      })\n    }\n  });\n}\n\n/**\n * Geolocation Position Acquired action.\n */\nexport function geolocationPositionAcquired(ll, mainDispatch) {\n  geocodeLocation(ll, mainDispatch, true)\n  return {\n    type: types.GEOLOCATION_POSITION_ACQUIRED,\n    data: ll\n  }\n}\n\n/**\n * Map Address Changed\n */\nexport function mapAddressChanged(address) {\n  return {\n    type: types.MAP_ADDRESS_CHANGED,\n    data: address\n  }\n}\n\n\n\n\n/**\n * Geocode Given Location and dispatch MAP_ADDRESS_CHANGED action.\n */\nfunction geocodeLocation(location, mainDispatch, fromGeoLocation) {\n  geocoder.geocode({location}, (results, status) => {\n    if (status === \"OK\") {\n      const place = results[0]\n      const address = {}\n\n      let isBetweenAddress = -1\n      isBetweenAddress = place.formatted_address.indexOf(\" a \")\n      if (isBetweenAddress === -1) {\n        address.address = place.formatted_address\n      } else {\n        let street = place.formatted_address.substr(0, isBetweenAddress)\n        let city = \"\"\n        place.address_components.forEach(component => {\n          if (component.types.indexOf(\"locality\") !== -1) city = component.short_name\n        })\n        address.address = street + \", \" + city\n      }\n\n      address.location = {\n        lat: place.geometry.location.lat(),\n        lng: place.geometry.location.lng()\n      }\n      address.fromGeoLocation = fromGeoLocation\n      mainDispatch(mapAddressChanged(address))\n    }\n  })\n}\n\n/**\n * Map Location Changed, geocode and send MAP_ADDRESS_CHANGED with geocoded result\n */\nexport function mapBoundsChanged(mapBounds, mainDispatch) {\n  mainDispatch({\n    type: types.MAP_BOUNDS_CHANGED,\n    data: mapBounds.bounds\n  })\n  return dispatch => {\n    geocodeLocation(mapBounds.center, mainDispatch)\n  }\n}\n\n/**\n * Address Text Changed\n */\nexport function addressTextChanged(address) {\n  return {\n    type: types.ADDRESS_TEXT_CHANGED,\n    data: address\n  }\n}\n\n/**\n * SHOW_MAP_ADDRESS action\n */\nexport function showMapAddress() {\n  return { type: types.SHOW_MAP_ADDRESS }\n}\n\n/**\n * HIDE_MAP_ADDRESS action\n */\nexport function hideMapAddress() {\n  return { type: types.HIDE_MAP_ADDRESS }\n}\n\n/**\n * SHOW_ADDRESS_FORM action\n */\nexport function showAddressForm() {\n  return { type: types.SHOW_ADDRESS_FORM }\n}\n\n\n\n\n\n/**\n * CONSUMER_ADDRESS_CHANGED action\n */\nexport function consumerAddressChanged(consumerAddress, dispatch, pendingOrder, cart) {\n  saveConsumerAddress(consumerAddress, dispatch, pendingOrder, cart)\n  return {\n    type: types.CONSUMER_ADDRESS_CHANGED,\n    data: consumerAddress\n  }\n}\n\n/**\n * CONSUMER ADDRESS LOADED action\n */\nexport function consumerAddressesLoaded(consumerAddresses) {\n  return {\n    type: types.CONSUMER_ADDRESSES_LOADED,\n    data: consumerAddresses\n  }\n}\n\n\n\n/**\n * SHOW_ADDRESS_LIST action\n */\nexport function showAddressList() {return {type: types.SHOW_ADDRESS_LIST}}\n\n/**\n * HIDE_ADDRESS_LIST action\n */\nexport function hideAddressList() {return {type: types.HIDE_ADDRESS_LIST}}\n\n\n\n/**\n * Select Payment Method action\n */\nexport function selectPaymentMethod(paymentMethod) {\n  return {\n    type: types.SELECT_PAYMENT_METHOD,\n    data: paymentMethod\n  }\n}\n\n/**\n * Create New Address action\n */\nexport function createNewAddress() { return { type: types.CREATE_NEW_ADDRESS } }\n\n/**\n * Get Geolocation\n */\nexport function getGeoLocation(dispatch) {\n  if (\"geolocation\" in navigator) {\n    navigator.geolocation.getCurrentPosition(position => {\n      const ll = {\n        lat: position.coords.latitude,\n        lng: position.coords.longitude\n      }\n      dispatch(geolocationPositionAcquired(ll, dispatch))\n    })\n  }\n}\n\n/**\n * Convert Cart to Order\n */\nfunction cartToOrder(cart, items) {\n  return {\n    items: items,\n    comment: cart.comment,\n    consumer: cart.consumer.rawParseObject,\n    pointSale: cart.pointSale.rawParseObject,\n    paymentMethod: cart.paymentMethod,\n    consumerAddress: cart.consumerAddress.rawParseObject,\n    total: cart.total,\n    deliveryCost: cart.pointSale.deliveryCost,\n    email: cart.consumer.email,\n    name: cart.consumer.name,\n    phone: cart.consumer.phone\n  }\n}\n\n/**\n * Create Order Action\n */\nexport function createOrder(cart, mainDispatch) {\n  mainDispatch(push('/'))\n  mainDispatch({type: types.CREATE_ORDER})\n  const consumer = cart.consumerAddress.consumer\n\n  //Go to Login route if cart has no consumer\n  if (!consumer.objectId) {\n    mainDispatch({type: types.HIDE_CART})\n    mainDispatch({type: types.CREATE_ORDER_ERROR})\n    return mainDispatch(push('/login'))\n  }\n\n  //Check that cart has at least 1 item.\n  if (cart.items.length === 0) {\n    mainDispatch({type: types.CREATE_ORDER_ERROR})\n    return mainDispatch(showEmptyCartModal())\n  }\n\n  //If payment method isn't set, dispatch action to show payment method modal\n  if (!cart.paymentMethod) {\n    mainDispatch({type: types.CREATE_ORDER_ERROR})\n    return mainDispatch(showPaymentNotSelectedModal())\n  }\n\n  //If cart total price is below point of sale minimum price dispatch action\n  //to show minimum price modal\n  if (cart.total < cart.pointSale.minOrderPrice) {\n    mainDispatch({type: types.CREATE_ORDER_ERROR})\n    return mainDispatch(cartTotalIsBelowMinimumPrice())\n  }\n\n  //If cart hasn't consumer address show list of address.\n  if (!cart.consumerAddress.objectId) {\n    mainDispatch({type: types.CREATE_ORDER_ERROR})\n    return mainDispatch(showAddressList())\n  }\n\n  //Check if Point of Sale is open\n  if (!cart.pointSaleIsOpen) {\n    mainDispatch({type: types.CREATE_ORDER_ERROR})\n    return mainDispatch(showPointSaleClosedModal())\n  }\n  //Check if is inside coverage\n  if (cart.outOfCoverage) {\n    mainDispatch({type: types.CREATE_ORDER_ERROR})\n    return mainDispatch(showOufOfCoverageModal())\n  }\n\n  const items = []\n  cart.items.forEach(item => {\n    const orderItem = new OrderItem()\n    orderItem.set('modifiers', [])\n    orderItem.set('modifiersGroups', [])\n    orderItem.set('product', item.product.rawParseObject)\n    orderItem.set('amount', item.amount)\n    orderItem.set('price', item.price)\n    //Set OrderItemModifiers\n    item.modifiers.forEach(modifierItem => {\n      const m = new Modifier()\n      m.id = modifierItem.modifier.objectId\n      const i = new ModifierItem()\n      i.id = modifierItem.modifierItem.objectId\n      const orderItemModifier = new OrderItemModifier({\n        modifier: m,\n        modifierItem: i,\n        price: modifierItem.price\n      })\n      orderItem.add('modifiers', orderItemModifier)\n    })\n    //Set Modifiers Group\n    item.modifiersGroups.forEach(modifierGroupItem => {\n      const g = new ModifierGroup()\n      g.id = modifierGroupItem.group.objectId\n      const orderItemModifierGroup = new OrderItemModifierGroup({\n        group: g,\n        items: []\n      })\n      modifierGroupItem.items.forEach(modifierItem => {\n        const m = new Modifier()\n        m.id = modifierItem.modifier.objectId\n        const i = new ModifierItem()\n        i.id = modifierItem.modifierItem.objectId\n        orderItemModifierGroup.add('items', new OrderItemModifier({\n          modifier: m,\n          modifierItem: i,\n          price: modifierItem.price\n        }))\n      })\n      orderItem.add('modifiersGroups', orderItemModifierGroup)\n    })\n    items.push(orderItem)\n  })\n\n  const newOrder = new Order()\n  newOrder.set(cartToOrder(cart, items))\n  Parse.Object.saveAll(items).then(function () {\n    return newOrder.save()\n  }).then(order => {\n    mainDispatch({type: types.ORDER_CREATED, data: order})\n    mainDispatch(emptyCart())\n    mainDispatch(loadConsumerOrders())\n    mainDispatch(toggleCart(false))\n  }).fail(e => {\n    alert('Hubo un error al crear su pedido, por favor intenta nuevamente.')\n  })\n}\n\n/**\n * Change Cart Comment Action\n */\nexport function changeCartComment(comment) {\n  return {\n    type: types.CHANGE_CART_COMMENT,\n    data: comment\n  }\n}\n\n/**\n * Show Payment not selected Modal action\n */\nexport function showPaymentNotSelectedModal() {\n  return { type: types.PAYMENT_NOT_SELECTED }\n}\n\n/**\n * Show Cart is Empty Modal\n */\nexport function showEmptyCartModal() {\n  return { type: types.SHOW_EMPTY_CART_MODAL }\n}\n/**\n * Hide Cart is Empty Modal\n */\nexport function closeCartIsEmptyModal() {\n  return { type: types.HIDE_EMPTY_CART_MODAL }\n}\n/**\n * Hide Payment not selected Modal action\n */\nexport function hidePaymentNotSelectedModal() {\n  return { type: types.PAYMENT_SELECTED }\n}\n\n/**\n * Action to show cart minimum price modal\n */\nexport function cartTotalIsBelowMinimumPrice() {\n  return { type: types.CART_TOTAL_IS_BELOW_MIN_PRICE }\n}\n\n/**\n * Action to hide cart minimum price modal\n */\nexport function hideOrderMinimumPriceModal() {\n  return { type: types.CART_TOTAL_IS_ABOVE_MIN_PRICE }\n}\n\n/**\n * Order Created Action\n */\nexport function orderCreated(order) {\n  return {\n    type: types.ORDER_CREATED,\n    data: order\n  }\n}\n\nexport function unsetCurrentOrder() {\n  return {type: types.UNSET_CURRENT_ORDER}\n}\n\n\n\n/**\n * Set current order action\n */\nexport function setCurrentOrder(order) {\n  return {\n    type: types.SET_CURRENT_ORDER,\n    data: order\n  }\n}\n\n/**\n * Load Cart by Id.\n */\nexport function loadCart(cartId) {\n  return {type: 'NOTHING'}\n  /* * /\n   //Disabled due to malfunction.\n   return dispatch => {\n   new Parse.Query(Cart).include([\"consumer\", \"pointSale\",\n   \"consumerAddress.consumer\", \"items.product\",\n   \"items.modifiers.modifier.items\", \"items.modifiers.modifierItem\",\n   \"items.modifiersGroups.group.modifiers.items\",\n   \"items.modifiersGroups.items.modifier.items\",\n   \"items.modifiersGroups.items.modifierItem\"\n   ]).get(cartId).then(cart => {dispatch({\n   type: types.CART_LOADED,\n   data: cart\n   })\n   })\n   }\n   /* */\n}\n\n/**\n * Close Point Sale Closed Modal\n */\nexport function hidePointSaleClosedModal() {\n  return {type: types.HIDE_POINT_SALE_CLOSED_MODAL}\n}\n\n/**\n * Open Point Sale Closed Modal\n */\nexport function showPointSaleClosedModal() {\n  return {type: types.SHOW_POINT_SALE_CLOSED_MODAL}\n}\n\nexport function hideProfile() {\n  return {type: types.HIDE_PROFILE}\n}\n\nexport function showProfile() {\n  return {type: types.SHOW_PROFILE}\n}\n\nexport function closeOutOfCoverageModal() {\n  return {type: types.HIDE_OUT_OF_COVERAGE_MODAL}\n}\n\nexport function showOufOfCoverageModal() {\n  return {type: types.SHOW_OUT_OF_COVERAGE_MODAL}\n}\n\nexport function removeItem(item) {\n  return {type: types.CART_ITEM_REMOVE, data: item}\n}\n\nexport function increaseItem(item) {\n  return {type: types.CART_ITEM_INCREASE_AMOUNT, data: item}\n}\n\nexport function decreaseItem(item) {\n  return {type: types.CART_ITEM_DECREASE_AMOUNT, data: item}\n}\n\nexport function toggleCart(isOpen) {\n  return {type: types.TOGGLE_CART, data: isOpen}\n}\n\nexport function rateOrder(orderId, score, comment) {\n  return dispatch => {\n    dispatch({type: types.RATING_ORDER})\n    Parse.Cloud.run('rateOrder', {orderId, score, comment}).then(function () {\n      dispatch({type: types.RATE_ORDER_SUCCESS})\n      return dispatch(loadConsumerOrders())\n    }).fail(function (e) {\n      return {type: types.RATE_ORDER_ERROR, data: e}\n    })\n  }\n}\n\nexport function showSiteMap () {\n  return { type: types.SHOW_SITEMAP}\n}\n\nexport function hideSiteMap () {\n  return { type: types.HIDE_SITEMAP }\n}\n\nexport function hideOutOfCoverageModal() {\n  return { type: types.HIDE_OUT_OF_COVERAGE_MODAL }\n}\n\n/**\n * Load Point of Sales of given businessId.\n */\nexport function loadPointSales (senderId) {\n  return getCustomerByFanpage(senderId).then(customer => {\n    const params = {businessId: customer.businessId}\n    return dispatch => {\n      Parse.Cloud.run('getPointSales', params).then((results) => {\n        dispatch({type: types.POINT_OF_SALES_LOADED, data: results})\n      })\n    }\n  });\n}\n\n/**\n * Geolocation error.\n */\nexport function geolocationError() {\n  return {type: types.GEOLOCATION_ERROR }\n}\n\n/**\n * Hide Geolocation Error Modal.\n */\nexport function hideAddressSearchModal() {\n  return {type: types.HIDE_GEOLOCATION_ERROR_MODAL }\n}\n\n/**\n * Show Address Search Modal.\n */\nexport function showAddressSearchModal() {\n  return {type: types.SHOW_ADDRESS_SEARCH_MODAL }\n}\n\n\nfunction renderMenu() {\n  return {type: types.RENDER_MENU }\n}\n"]}